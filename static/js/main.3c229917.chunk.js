(this["webpackJsonprenju-note"]=this["webpackJsonprenju-note"]||[]).push([[0],{160:function(e,t,n){},162:function(e,t,n){},163:function(e,t,n){"use strict";n.r(t);var r=n(7),c=n.n(r),a=n(12),s=(n(102),n(107)),i=n(1),o=n(60),u=n.n(o),l=n(204),d=n(177),j=n(180),h=n(214),b=n(68),f=n(5),O=n(21),x=n(23),v=n(75),m=n(74),p=n(29),g=n(9),y=function(){function e(){Object(O.a)(this,e),this.vlines=new Array(g.a).fill(0)}return Object(x.a)(e,[{key:"putMut",value:function(e,t){var n=Object(f.a)(t,2),r=n[0],c=n[1];this.vlines[r]+=(e?1:2)<<2*c}},{key:"putMovesMut",value:function(e,t){var n,r=e,c=Object(p.a)(t);try{for(c.s();!(n=c.n()).done;){var a=n.value;this.putMut(r,a),r=!r}}catch(s){c.e(s)}finally{c.f()}}},{key:"toString",value:function(){var e,t="",n=0,r=Object(p.a)(this.vlines);try{for(r.s();!(e=r.n()).done;){var c=e.value;0===c?n++:(0!==n&&(t+=n.toString(16)+".",n=0),t+=c.toString(16)+"/",n=0)}}catch(a){r.e(a)}finally{r.f()}return t}}]),e}(),k=[{id:0,reversed:!1,rotation:0},{id:1,reversed:!0,rotation:0},{id:2,reversed:!1,rotation:90},{id:3,reversed:!0,rotation:90},{id:4,reversed:!1,rotation:180},{id:5,reversed:!0,rotation:180},{id:6,reversed:!1,rotation:270},{id:7,reversed:!0,rotation:270}],w=function(e){return k.map((function(t){return e.map((function(e){return C(e,t.reversed,t.rotation)}))}))},S=function(e,t){var n=k[t],r=n.reversed,c=n.rotation;return C(e,r,c)},C=function(e,t,n){var r=g.a-1,c=t?[e[1],e[0]]:e,a=Object(f.a)(c,2),s=a[0],i=a[1];switch(n){case 0:return[s,i];case 90:return[i,r-s];case 180:return[r-s,r-i];case 270:return[r-i,s];default:return[s,i]}},M=function(e){for(var t=z(),n=0;n<e.length;n++)t[n].putMovesMut(!0,e[n]);return t},z=function(){return[new y,new y,new y,new y,new y,new y,new y,new y]},W=function(e){var t=I(e.map((function(e){return e.toString()})))[0];return[t,e[t]]},I=function(e){for(var t=0,n=e[0],r=1;r<e.length;r++)e[r]<n&&(t=r,n=e[r]);return[t,n]},B=function(e){for(var t,n=z(),r=w(e),c=[],a=0;a<e.length;a++){for(var s=a%2===0,i=0;i<r.length;i++){var o=r[i][a];n[i].putMut(s,o)}c[a]=(t=n,I(t.map((function(e){return e.toString()}))))[1]}return c},A=n(14),F=function(e){var t,n=0,r=0,c=0,a=Object(p.a)(e);try{for(a.s();!(t=a.n()).done;){var s=t.value;s.blackWon?n+=1:s.whiteWon?r+=1:c+=1}}catch(i){a.e(i)}finally{a.f()}return{all:e.length,blackWon:n,whiteWon:r,draw:c}},P=function(e,t){var n=e.map((function(e){return e.moves.slice(0,t.length+1)}));return R(t,n).map((function(t){var n=Object(f.a)(t,2),r=n[0],c=n[1].map((function(t){return e[t]}));return[r,F(c)]})).sort((function(e,t){return t[1].all-e[1].all}))},R=function(e,t){for(var n=e.length,r=new Map,c=0;c<t.length;c++){var a=t[c];if(!(a.length<=n)){var s=[a.slice(0,n),a[n]],i=s[1],o=w(s[0]),u=W(M(o))[0],l=S(i,u),d=L(l),j=r.get(d);void 0===j?r.set(d,[c]):j.push(c)}}for(var h=W(M(w(e)))[0],b=[0,1,6,3,4,5,2,7][h],O=new Map,x=0,v=Array.from(r.entries());x<v.length;x++){var m,p=Object(f.a)(v[x],2),g=p[0],y=p[1],k=S(E(g),b),C=[].concat(Object(A.a)(e),[k]),z=W(M(w(C)))[1].toString(),I=O.get(z);if(void 0===I)O.set(z,[k,y]);else L(k)<L(I[0])&&(I[0]=k),(m=I[1]).push.apply(m,Object(A.a)(y))}return Array.from(O.values())},L=function(e){return e[0]*g.a+e[1]},E=function(e){return[~~(e/g.a),e%g.a]},D=n(20),N=function(){function e(t){Object(O.a)(this,e),this.moves=[],this.inverted=!1,void 0!==t&&Object.assign(this,t)}return Object(x.a)(e,[{key:"update",value:function(t){return new e(Object(D.a)(Object(D.a)({},this),t))}},{key:"move",value:function(e){return this.has(e)?this:this.update({moves:[].concat(Object(A.a)(this.moves),[e])})}},{key:"undo",value:function(){return 0===this.moves.length?this:this.update({moves:this.moves.slice(0,this.moves.length-1)})}},{key:"has",value:function(e){return this.moves.findIndex((function(t){return Object(g.f)(e,t)}))>=0}},{key:"cut",value:function(e){return this.update({moves:this.moves.slice(0,e)})}},{key:"invert",value:function(e){return this.update({inverted:e})}},{key:"canUndo",get:function(){return this.moves.length>0}},{key:"blacks",get:function(){var e=this.inverted?1:0;return this.moves.filter((function(t,n){return n%2===e}))}},{key:"whites",get:function(){var e=this.inverted?0:1;return this.moves.filter((function(t,n){return n%2===e}))}},{key:"lastMove",get:function(){return this.moves[this.moves.length-1]}},{key:"isBlackTurn",get:function(){var e=this.inverted?1:0;return this.moves.length%2===e}},{key:"size",get:function(){return this.moves.length}},{key:"empty",get:function(){return 0===this.moves.length}},{key:"encode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(g.k)(this.moves).toString(e)}}],[{key:"decode",value:function(t){var n=Object(g.e)(t);return n&&new e({moves:n})}}]),e}(),T=2e3,G=["countries","cities","months","rules","openings","players","tournaments","games"],U={countries:G[0],cities:G[1],months:G[2],rules:G[3],openings:G[4],players:G[5],tournaments:G[6],games:G[7]},q={countries:"id",cities:"id",months:"id",rules:"id",openings:"id",players:"id,name,surname,country",tournaments:"id,name,country,year",games:"id,tournament,black,white,bresult"},Q=function(e){Object(v.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this,n.DBNAME)).countries=void 0,e.cities=void 0,e.months=void 0,e.rules=void 0,e.openings=void 0,e.players=void 0,e.tournaments=void 0,e.games=void 0,e.version(1).stores(q),e.countries=e.table(U.countries),e.cities=e.table(U.cities),e.months=e.table(U.months),e.rules=e.table(U.rules),e.openings=e.table(U.openings),e.players=e.table(U.players),e.tournaments=e.table(U.tournaments),e.games=e.table(U.games),e}return Object(x.a)(n,[{key:"searchPlayers",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:10,e.next=3,this.players.where("surname").startsWithAnyOfIgnoreCase(t).or("name").startsWithAnyOfIgnoreCase(t).limit(n).sortBy("surname");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getGameViews",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,a,s,i,o,u,l,d;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,this.games.bulkGet(t);case 4:return n=e.sent,e.next=7,Promise.all([this.players.bulkGet(n.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.black)&&void 0!==t?t:0}))),this.players.bulkGet(n.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.white)&&void 0!==t?t:0}))),this.players.bulkGet(n.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.publisher)&&void 0!==t?t:0}))),this.tournaments.bulkGet(n.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.tournament)&&void 0!==t?t:0}))),this.rules.bulkGet(n.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.rule)&&void 0!==t?t:0}))),this.openings.bulkGet(n.map((function(e){var t;return null!==(t=null===e||void 0===e?void 0:e.opening)&&void 0!==t?t:0})))]);case 7:return r=e.sent,a=Object(f.a)(r,6),s=a[0],i=a[1],o=a[2],u=a[3],l=a[4],d=a[5],e.abrupt("return",n.map((function(e,t){var n,r,c,a,j,h,b,f,O,x,v,m,p,y,k,w,S=null!==(n=null===e||void 0===e?void 0:e.bresult)&&void 0!==n?n:null,C=1===S||0!==S&&null,M=0===S||1!==S&&null;return{id:null!==(r=null===e||void 0===e?void 0:e.id)&&void 0!==r?r:0,black:null!==(c=s[t])&&void 0!==c?c:V(),white:null!==(a=i[t])&&void 0!==a?a:V(),blackWon:C,whiteWon:M,moves:null!==(j=Object(g.e)(null!==(h=null===e||void 0===e?void 0:e.move)&&void 0!==h?h:""))&&void 0!==j?j:[],btime:null!==(b=null===e||void 0===e?void 0:e.btime)&&void 0!==b?b:0,wtime:null!==(f=null===e||void 0===e?void 0:e.wtime)&&void 0!==f?f:0,opening:null!==(O=d[t])&&void 0!==O?O:H(),rule:null!==(x=l[t])&&void 0!==x?x:_(),alt:null!==(v=null===e||void 0===e?void 0:e.alt)&&void 0!==v?v:"",alts:[],swap:null!==(m=null===e||void 0===e?void 0:e.swap)&&void 0!==m?m:"",info:null!==(p=null===e||void 0===e?void 0:e.info)&&void 0!==p?p:"",publisher:null!==(y=o[t])&&void 0!==y?y:V(),tournament:null!==(k=u[t])&&void 0!==k?k:Y(),round:null!==(w=null===e||void 0===e?void 0:e.round)&&void 0!==w?w:""}})));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPlayer",value:function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.players.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getGamesByIdRange",value:function(){var e=Object(a.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.games.where("id").between(t,n).toArray();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getMaxGameId",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.games.orderBy("id").last();case 2:return n=e.sent,e.abrupt("return",null!==(t=null===n||void 0===n?void 0:n.id)&&void 0!==t?t:0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTournamentsStartDateNumberMap",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r,a,s,i,o,u,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tournaments.toArray();case 2:for(t=e.sent,n=new Map,r=0;r<t.length;r++)a=t[r],(s=a.start.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})$/))?(i=[s[1],s[2],s[3]],o=i[0],u=i[1],l=i[2],n.set(a.id,parseInt(o+u+l))):n.set(a.id,0);return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTournamentsRatedMap",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.tournaments.toArray();case 2:for(t=e.sent,n=new Map,r=0;r<t.length;r++)a=t[r],n.set(a.id,a.rated);return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCountriesMap",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.countries.toArray();case 2:for(t=e.sent,n=new Map,r=0;r<t.length;r++)a=t[r],n.set(a.id,a);return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCitiesMap",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.cities.toArray();case 2:for(t=e.sent,n=new Map,r=0;r<t.length;r++)a=t[r],n.set(a.id,a);return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadFromFile",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,a,s,i,o,u,l,d,j,h,b,f=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.length>1&&void 0!==f[1]?f[1]:function(){},e.next=3,t.text();case 3:return r=e.sent,a=(new DOMParser).parseFromString(r,"application/xml"),s=a.querySelector(U.countries),i=[],null!==s&&i.push(this.addCountries(s.children)),null!==(o=a.querySelector(U.cities))&&i.push(this.addCities(o.children)),null!==(u=a.querySelector(U.months))&&i.push(this.addMonths(u.children)),null!==(l=a.querySelector(U.openings))&&i.push(this.addOpenings(l.children)),null!==(d=a.querySelector(U.rules))&&i.push(this.addRules(d.children)),null!==(j=a.querySelector(U.players))&&i.push(this.addPlayers(j.children)),null!==(h=a.querySelector(U.tournaments))&&i.push(this.addTournaments(h.children)),null!==(b=a.querySelector(U.games))&&i.push(this.addGames(b.children,n)),e.next=24,Promise.all(i);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addCountries",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,s,i,o,u,l,d,j,h=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=0;case 2:if(!(r<t.length)){e.next=10;break}if(u=null!==(s=$(t,r))&&void 0!==s?s:[],l=Object(f.a)(u,2),d=l[0],j=l[1],d&&j){e.next=6;break}return e.abrupt("continue",7);case 6:n.push({id:j,name:null!==(i=d.getAttribute("name"))&&void 0!==i?i:"",abbr:null!==(o=d.getAttribute("abbr"))&&void 0!==o?o:""});case 7:r++,e.next=2;break;case 10:return e.next=12,this.transaction("rw",this.countries,Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.countries.bulkAdd(n);case 2:case"end":return e.stop()}}),e)}))));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addCities",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,s,i,o,u,l,d,j,h=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=0;case 2:if(!(r<t.length)){e.next=10;break}if(u=null!==(s=$(t,r))&&void 0!==s?s:[],l=Object(f.a)(u,2),d=l[0],j=l[1],d&&j){e.next=6;break}return e.abrupt("continue",7);case 6:n.push({id:j,name:null!==(i=d.getAttribute("name"))&&void 0!==i?i:"",country:parseInt(null!==(o=d.getAttribute("country"))&&void 0!==o?o:"")});case 7:r++,e.next=2;break;case 10:return e.next=12,this.transaction("rw",this.cities,Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.cities.bulkAdd(n);case 2:case"end":return e.stop()}}),e)}))));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addMonths",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,s,i,o,u,l,d,j=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=0;case 2:if(!(r<t.length)){e.next=10;break}if(o=null!==(s=$(t,r))&&void 0!==s?s:[],u=Object(f.a)(o,2),l=u[0],d=u[1],l&&d){e.next=6;break}return e.abrupt("continue",7);case 6:n.push({id:d,name:null!==(i=l.getAttribute("name"))&&void 0!==i?i:""});case 7:r++,e.next=2;break;case 10:return e.next=12,this.transaction("rw",this.months,Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.months.bulkAdd(n);case 2:case"end":return e.stop()}}),e)}))));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addRules",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,s,i,o,u,l,d,j,h,b=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=0;case 2:if(!(r<t.length)){e.next=10;break}if(l=null!==(s=$(t,r))&&void 0!==s?s:[],d=Object(f.a)(l,2),j=d[0],h=d[1],j&&h){e.next=6;break}return e.abrupt("continue",7);case 6:n.push({id:h,name:null!==(i=j.getAttribute("name"))&&void 0!==i?i:"",info:null!==(o=null===(u=j.getElementsByTagName("info").item(0))||void 0===u?void 0:u.innerHTML)&&void 0!==o?o:""});case 7:r++,e.next=2;break;case 10:return e.next=12,this.transaction("rw",this.rules,Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.rules.bulkAdd(n);case 2:case"end":return e.stop()}}),e)}))));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addOpenings",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,s,i,o,u,l,d,j,h=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=0;case 2:if(!(r<t.length)){e.next=10;break}if(u=null!==(s=$(t,r))&&void 0!==s?s:[],l=Object(f.a)(u,2),d=l[0],j=l[1],d&&j){e.next=6;break}return e.abrupt("continue",7);case 6:n.push({id:j,name:null!==(i=d.getAttribute("name"))&&void 0!==i?i:"",abbr:null!==(o=d.getAttribute("abbr"))&&void 0!==o?o:""});case 7:r++,e.next=2;break;case 10:return e.next=12,this.transaction("rw",this.openings,Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.openings.bulkAdd(n);case 2:case"end":return e.stop()}}),e)}))));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addPlayers",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,s,i,o,u,l,d,j,h,b,O=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=0;case 2:if(!(r<t.length)){e.next=10;break}if(d=null!==(s=$(t,r))&&void 0!==s?s:[],j=Object(f.a)(d,2),h=j[0],b=j[1],h&&b){e.next=6;break}return e.abrupt("continue",7);case 6:n.push({id:b,name:null!==(i=h.getAttribute("name"))&&void 0!==i?i:"",surname:null!==(o=h.getAttribute("surname"))&&void 0!==o?o:"",country:parseInt(null!==(u=h.getAttribute("country"))&&void 0!==u?u:""),city:parseInt(null!==(l=h.getAttribute("city"))&&void 0!==l?l:"")});case 7:r++,e.next=2;break;case 10:return e.next=12,this.transaction("rw",this.players,Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.players.bulkAdd(n);case 2:case"end":return e.stop()}}),e)}))));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addTournaments",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,s,i,o,u,l,d,j,h,b,O,x,v,m,p,g=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=0;case 2:if(!(r<t.length)){e.next=10;break}if(x=null!==(s=$(t,r))&&void 0!==s?s:[],v=Object(f.a)(x,2),m=v[0],p=v[1],m&&p){e.next=6;break}return e.abrupt("continue",7);case 6:n.push({id:p,name:null!==(i=m.getAttribute("name"))&&void 0!==i?i:"",country:parseInt(null!==(o=m.getAttribute("country"))&&void 0!==o?o:""),city:parseInt(null!==(u=m.getAttribute("city"))&&void 0!==u?u:""),year:parseInt(null!==(l=m.getAttribute("year"))&&void 0!==l?l:""),month:parseInt(null!==(d=m.getAttribute("month"))&&void 0!==d?d:""),start:null!==(j=m.getAttribute("start"))&&void 0!==j?j:"",end:null!==(h=m.getAttribute("end"))&&void 0!==h?h:"",rule:parseInt(null!==(b=m.getAttribute("rule"))&&void 0!==b?b:""),rated:"1"===(null!==(O=m.getAttribute("rated"))&&void 0!==O?O:"")});case 7:r++,e.next=2;break;case 10:return e.next=12,this.transaction("rw",this.tournaments,Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.tournaments.bulkAdd(n);case 2:case"end":return e.stop()}}),e)}))));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addGames",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,s,i=this,o=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o.length>1&&void 0!==o[1]?o[1]:function(){},r=c.a.mark((function e(r){var s,o,u,l,d,j,h,b,O,x,v,m,p,g,y,k,w,S,C,M,z,W,I;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=[],o=0;case 2:if(!(o<T)){e.next=10;break}if(M=null!==(u=$(t,r+o))&&void 0!==u?u:[],z=Object(f.a)(M,2),W=z[0],I=z[1],W&&I){e.next=6;break}return e.abrupt("continue",7);case 6:s[o]={id:I,publisher:parseInt(null!==(l=W.getAttribute("publisher"))&&void 0!==l?l:""),tournament:parseInt(null!==(d=W.getAttribute("tournament"))&&void 0!==d?d:""),round:null!==(j=W.getAttribute("round"))&&void 0!==j?j:"",rule:parseInt(null!==(h=W.getAttribute("rule"))&&void 0!==h?h:""),black:parseInt(null!==(b=W.getAttribute("black"))&&void 0!==b?b:""),white:parseInt(null!==(O=W.getAttribute("white"))&&void 0!==O?O:""),bresult:parseFloat(null!==(x=W.getAttribute("bresult"))&&void 0!==x?x:""),btime:parseInt(null!==(v=W.getAttribute("btime"))&&void 0!==v?v:""),wtime:parseInt(null!==(m=W.getAttribute("wtime"))&&void 0!==m?m:""),opening:parseInt(null!==(p=W.getAttribute("opening"))&&void 0!==p?p:""),alt:null!==(g=W.getAttribute("alt"))&&void 0!==g?g:"",swap:null!==(y=W.getAttribute("swap"))&&void 0!==y?y:"",move:null!==(k=null===(w=W.getElementsByTagName("move").item(0))||void 0===w?void 0:w.innerHTML)&&void 0!==k?k:"",info:null!==(S=null===(C=W.getElementsByTagName("info").item(0))||void 0===C?void 0:C.innerHTML)&&void 0!==S?S:""};case 7:o++,e.next=2;break;case 10:return e.next=12,i.transaction("rw",i.games,Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.games.bulkAdd(s);case 2:case"end":return e.stop()}}),e)}))));case 12:n(Math.floor(100*(r+T)/t.length));case 13:case"end":return e.stop()}}),e)})),s=0;case 3:if(!(s<t.length)){e.next=8;break}return e.delegateYield(r(s),"t0",5);case 5:s+=T,e.next=3;break;case 8:n(100);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"reset",value:function(){indexedDB.deleteDatabase(n.DBNAME)}}]),n}(b.a);Q.DBNAME="rif";var $=function(e,t){var n=e.item(t);if(n){var r=parseInt(n.id);if(!isNaN(r))return[n,r]}},V=function(){return{id:0,name:"",surname:"",country:0,city:0}},H=function(){return{id:0,name:"",abbr:""}},_=function(){return{id:0,name:"",info:""}},Y=function(){return{id:0,name:"",country:0,city:0,year:0,month:0,start:"",end:"",rule:0,rated:!1}},J=function(e){var t;return"".concat(null!==(t=e.name.trim()[0])&&void 0!==t?t:"?",". ").concat(e.surname.trim())},K=function(e){if("RIF"===e)return"RIF";var t,n,r,c=e.match(/^Soosyrv(-[0-9]+)?$/);return c?"SS".concat(null!==(t=c[1])&&void 0!==t?t:""):(c=e.match(/^Taraguchi(-[0-9]+)?$/))?"TG".concat(null!==(n=c[1])&&void 0!==n?n:""):(c=e.match(/^Yamasyrv(-[0-9]+)?$/))?"YS".concat(null!==(r=c[1])&&void 0!==r?r:""):(c=e.match(/^Yamaguchi$/))?"YG":(c=e.match(/^Tarannikov$/))?"TN":(c=e.match(/^Sakata$/))?"SK":(c=e.match(/^LinHuan$/))?"LH":"other"},X=[[8,8],[9,9],[6,6]],Z=2e3,ee=1e3,te={games:"games"},ne={games:"id,date,*board,*player"},re=function(e){Object(v.a)(n,e);var t=Object(m.a)(n);function n(){var e;return Object(O.a)(this,n),(e=t.call(this,n.DBNAME)).games=void 0,e.version(2).stores(ne),e.games=e.table(te.games),e}return Object(x.a)(n,[{key:"loadFromRIFDatabase",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,r,a,s,i,o,u,l,d,j=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=j.length>0&&void 0!==j[0]?j[0]:function(){},n=new Q,e.next=4,Promise.all([n.getTournamentsStartDateNumberMap(),n.getTournamentsRatedMap(),n.getMaxGameId()]);case 4:r=e.sent,a=Object(f.a)(r,3),s=a[0],i=a[1],o=a[2],t(0),u=0;case 11:if(!(u<=o)){e.next=22;break}return e.next=14,n.getGamesByIdRange(u,u+Z);case 14:return l=e.sent,d=l.map((function(e){var t,n,r,c=null!==(t=N.decode(e.move))&&void 0!==t?t:new N({}),a=B(c.moves.slice(0,20)).slice(2);return{id:e.id,date:null!==(n=s.get(e.tournament))&&void 0!==n?n:0,board:a,player:[e.black,e.white],rated:null!==(r=i.get(e.tournament))&&void 0!==r&&r}})),e.next=18,this.games.bulkAdd(d);case 18:t(Math.floor(100*(u+Z)/o));case 19:u+=Z,e.next=11;break;case 22:t(100);case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"search",value:function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,a,s,i,o,u,l,d,j,h,b,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.moves,r=t.playerId,a=t.limit,s=void 0===a?ee:a,i=t.offset,o=void 0===i?0:i,u=t.desc,l=void 0===u||u,d={},void 0===n){e.next=9;break}if(!(n.length<3)){e.next=5;break}return e.abrupt("return",{ids:[],hit:0,error:"Too few moves to search (".concat(n.length," < ").concat(3,")")});case 5:if(!(n.length>20)){e.next=7;break}return e.abrupt("return",{ids:[],hit:0,error:"Too many moves to search (".concat(n.length," > ").concat(20,")")});case 7:j=B(n)[n.length-1],d.board=j;case 9:if(void 0!==r&&(d.player=r),void 0!==d.player||void 0!==d.board){e.next=12;break}return e.abrupt("return",{ids:[],hit:0,error:"Specify moves or player"});case 12:return e.next=14,this.games.where(d).distinct().count();case 14:if(!((h=e.sent)<=0)){e.next=17;break}return e.abrupt("return",{ids:[],hit:h,error:"No game found"});case 17:if(!(h>ee)){e.next=19;break}return e.abrupt("return",{ids:[],hit:h,error:"Too many games (".concat(h," > ").concat(ee,")")});case 19:return b=this.games.where(d).distinct(),l&&(b=b.reverse()),e.next=23,b.sortBy("date");case 23:return f=e.sent.slice(o,o+s).map((function(e){return e.id})),e.abrupt("return",{ids:f,hit:h});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"ready",value:function(){var e=Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=B(X)[X.length-1],e.next=4,this.games.where({board:t}).first();case 4:return e.t0=e.sent,e.t1=void 0,e.abrupt("return",e.t0!==e.t1);case 9:return e.prev=9,e.t2=e.catch(0),console.log(e.t2),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()}],[{key:"reset",value:function(){indexedDB.deleteDatabase(n.DBNAME)}}]),n}(b.a);re.DBNAME="analyzed";var ce=function(){var e=Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([b.a.exists(Q.DBNAME),b.a.exists(re.DBNAME)]);case 2:return t=e.sent,e.abrupt("return",t[0]&&t[1]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){function e(t){Object(O.a)(this,e),this.main=new N,this.cursor=0,this.branch=[],this.gameid=void 0,void 0!==t&&(Object.assign(this,t),"cursor"in t||(this.cursor=this.main.size))}return Object(x.a)(e,[{key:"update",value:function(t){return new e(Object(D.a)(Object(D.a)(Object(D.a)({},this),t),{},{cache:void 0}))}},{key:"canMove",value:function(e){return!this.current.has(e)}},{key:"move",value:function(e){return this.canMove(e)?this.isBranching?this.moveBranch(e):!this.isLast&&Object(g.f)(e,this.main.moves[this.cursor])?this.forward():!this.isLast||this.isReadOnly?this.moveBranch(e):this.moveMain(e):this}},{key:"canUndo",get:function(){return this.isBranching||!this.isReadOnly&&this.isLast&&!this.main.empty}},{key:"undo",value:function(){return this.canUndo?this.isBranching?this.undoBranch():this.undoMain():this}},{key:"canClearRest",get:function(){return!this.isBranching&&!this.isReadOnly&&!this.isLast}},{key:"clearRest",value:function(){return this.canClearRest?this.update({main:this.main.cut(this.cursor)}).toLast():this}},{key:"moveMain",value:function(e){return this.update({main:this.main.move(e)}).toLast()}},{key:"undoMain",value:function(){return this.update({main:this.main.undo()}).toLast()}},{key:"isStart",get:function(){return 0===this.cursor}},{key:"isLast",get:function(){return this.cursor===this.main.size}},{key:"canForward",get:function(){return!this.isBranching&&!this.isLast}},{key:"forward",value:function(){return this.canForward?this.navigate(this.cursor+1):this}},{key:"toLast",value:function(){return this.canForward?this.navigate(this.main.size):this}},{key:"canBackward",get:function(){return!this.isBranching&&!this.isStart}},{key:"backward",value:function(){return this.canBackward?this.navigate(this.cursor-1):this}},{key:"toStart",value:function(){return this.canBackward?this.navigate(0):this}},{key:"navigate",value:function(e){return e<0||this.main.size<e?this:this.update({cursor:e})}},{key:"isBranching",get:function(){return this.branch.length>0}},{key:"moveBranch",value:function(e){return this.update({branch:[].concat(Object(A.a)(this.branch),[e])})}},{key:"undoBranch",value:function(){return this.update({branch:this.branch.slice(0,this.branch.length-1)})}},{key:"clearBranch",value:function(){return this.update({branch:[]})}},{key:"newFromBranch",value:function(){return new e({main:this.current,cursor:this.current.size})}},{key:"invertMoves",value:function(e){return this.update({main:this.main.invert(e),gameid:void 0})}},{key:"current",get:function(){return new N({moves:[].concat(Object(A.a)(this.main.cut(this.cursor).moves),Object(A.a)(this.branch)),inverted:this.main.inverted})}},{key:"blacks",get:function(){return this.current.blacks}},{key:"whites",get:function(){return this.current.whites}},{key:"isBlackTurn",get:function(){return this.current.isBlackTurn}},{key:"isReadOnly",get:function(){return void 0!==this.gameid}},{key:"encode",value:function(){var e=[];return void 0!==this.gameid&&e.push("gid:".concat(this.gameid)),this.main.empty||e.push("g:".concat(this.main.encode())),this.main.inverted&&e.push("o:i"),0!==this.cursor&&e.push("c:".concat(this.cursor)),e.join(",")}}],[{key:"decode",value:function(t){var n,r=t.split(","),c=function(e){var t,n;return null!==(t=null===(n=r.find((function(t){return t.startsWith(e)})))||void 0===n?void 0:n.replace(e,""))&&void 0!==t?t:""},a=c("g:"),s=c("c:"),i=c("gid:"),o=c("o:"),u=(null!==(n=N.decode(a))&&void 0!==n?n:new N).invert(o.includes("i"));return new e({main:u,cursor:Math.min(u.size,parseInt(s)||0),gameid:parseInt(i)||void 0})}}]),e}(),se=function(){function e(t){Object(O.a)(this,e),this.map={},t&&(this.map=t)}return Object(x.a)(e,[{key:"has",value:function(e){return!!this.map[e]}},{key:"on",value:function(t){var n,r={},c=Object(p.a)(t);try{for(c.s();!(n=c.n()).done;){r[n.value]=!0}}catch(a){c.e(a)}finally{c.f()}return new e(Object(D.a)(Object(D.a)({},this.map),r))}},{key:"off",value:function(t){var n,r={},c=Object(p.a)(t);try{for(c.s();!(n=c.n()).done;){r[n.value]=!1}}catch(a){c.e(a)}finally{c.f()}return new e(Object(D.a)(Object(D.a)({},this.map),r))}},{key:"change",value:function(t,n){var r,c={},a=Object(p.a)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;c[s]=n.includes(s)}}catch(i){a.e(i)}finally{a.f()}return new e(Object(D.a)(Object(D.a)({},this.map),c))}},{key:"empty",get:function(){for(var e in this.map)if(this.map[e])return!1;return!0}},{key:"values",get:function(){var e=[];for(var t in this.map)!0===this.map[t]&&e.push(t);return e}}]),e}(),ie=function(){function e(t){Object(O.a)(this,e),this.points=[],void 0!==t&&Object.assign(this,t)}return Object(x.a)(e,[{key:"update",value:function(t){return new e(Object(D.a)(Object(D.a)({},this),t))}},{key:"edit",value:function(e){var t=this.points,n=t.findIndex((function(t){return Object(g.f)(e,t)}));return this.update({points:n<0?[].concat(Object(A.a)(t),[e]):[].concat(Object(A.a)(t.slice(0,n)),Object(A.a)(t.slice(n+1)))})}},{key:"undo",value:function(){return this.update({points:this.points.slice(0,this.points.length-1)})}},{key:"has",value:function(e){return this.points.findIndex((function(t){return Object(g.f)(e,t)}))>=0}},{key:"canUndo",get:function(){return this.points.length>0}},{key:"empty",get:function(){return 0===this.points.length}},{key:"encode",value:function(){return this.points.map((function(e){return Object(g.j)(e).toString()})).join("")}}],[{key:"decode",value:function(t){var n=Object(g.e)(t);return n&&new e({points:n})}}]),e}(),oe=function(){function e(t){Object(O.a)(this,e),this.segments=[],this.start=void 0,void 0!==t&&Object.assign(this,t)}return Object(x.a)(e,[{key:"update",value:function(t){return new e(Object(D.a)(Object(D.a)({},this),t))}},{key:"draw",value:function(e){if(void 0===this.start)return this.update({start:e});var t=[this.start,e];return this.has(t)||!le(t)?this.update({start:void 0}):this.update({segments:[].concat(Object(A.a)(this.segments),[t]),start:void 0})}},{key:"undo",value:function(){return void 0!==this.start?this.update({start:void 0}):this.update({segments:this.segments.slice(0,this.segments.length-1)})}},{key:"unstart",value:function(){return this.update({start:void 0})}},{key:"canUndo",get:function(){return void 0!==this.start||this.segments.length>0}},{key:"empty",get:function(){return 0===this.segments.length}},{key:"has",value:function(e){return ue(this.segments,e)}},{key:"encode",value:function(){return this.segments.map((function(e){return Object(g.k)(e).toString("")})).join("")}}],[{key:"decode",value:function(t){var n=Object(g.e)(t);if(n&&n.length%2===0){for(var r=[],c=0;c<n.length/2;c++){var a=[n[2*c],n[2*c+1]];le(a)&&!ue(r,a)&&r.push(a)}return new e({segments:r})}}}]),e}(),ue=function(e,t){var n=Object(f.a)(t,2),r=n[0],c=n[1];return e.findIndex((function(e){var t=Object(f.a)(e,2),n=t[0],a=t[1];return Object(g.f)(r,n)&&Object(g.f)(c,a)||Object(g.f)(r,a)&&Object(g.f)(c,n)}))>=0},le=function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1];if(Object(g.f)(n,r))return!1;var c=Object(f.a)(n,2),a=c[0],s=c[1],i=Object(f.a)(r,2),o=i[0],u=i[1];return a===o||s===u||o-a===u-s||o-a===s-u},de="game",je="freeBlacks",he="freeWhites",be="markerPoints",fe="markerLines",Oe="preview",xe=function(){function e(t){Object(O.a)(this,e),this.mode=de,this.game=new ae,this.freeBlacks=new ie,this.freeWhites=new ie,this.markerPoints=new ie,this.markerLines=new oe,this.markerPath=new ie,this.pathTurn=!0,this.evals=[],this.cache=void 0,void 0!==t&&Object.assign(this,t)}return Object(x.a)(e,[{key:"update",value:function(t){return new e(Object(D.a)(Object(D.a)(Object(D.a)({},this),t),{},{cache:void 0}))}},{key:"canEdit",value:function(e){switch(this.mode){case de:return this.canEditMove(e);case je:return this.canEditFreeStone(e)&&!this.freeWhites.has(e);case he:return this.canEditFreeStone(e)&&!this.freeBlacks.has(e);case be:case fe:return!0;default:return!1}}},{key:"canEditMove",value:function(e){return this.game.canMove(e)&&!this.freeBlacks.has(e)&&!this.freeWhites.has(e)}},{key:"canEditFreeStone",value:function(e){return this.game.isLast&&!this.game.isBranching&&!this.game.main.has(e)}},{key:"edit",value:function(e){if(!this.canEdit(e))return this;switch(this.mode){case de:return this.update({game:this.game.move(e)});case je:return this.update({freeBlacks:this.freeBlacks.edit(e)});case he:return this.update({freeWhites:this.freeWhites.edit(e)});case be:return this.update({markerPoints:this.markerPoints.edit(e)});case fe:return this.update({markerLines:this.markerLines.draw(e)});default:return this}}},{key:"setMode",value:function(e){return this.update({mode:e,markerLines:e===be?this.markerLines:this.markerLines.unstart()})}},{key:"setGame",value:function(e){return this.update({game:e})}},{key:"canUndo",get:function(){switch(this.mode){case de:return this.game.canUndo;case je:return this.freeBlacks.canUndo;case he:return this.freeWhites.canUndo;case be:return this.markerPoints.canUndo;case fe:return this.markerLines.canUndo;default:return!1}}},{key:"undo",value:function(){if(!this.canUndo)return this;switch(this.mode){case de:return this.update({game:this.game.undo()});case je:return this.update({freeBlacks:this.freeBlacks.undo()});case he:return this.update({freeWhites:this.freeWhites.undo()});case be:return this.update({markerPoints:this.markerPoints.undo()});case fe:return this.update({markerLines:this.markerLines.undo()});default:return this}}},{key:"canClearRestOfMoves",get:function(){return this.mode===de&&!this.canUndo&&this.game.canClearRest}},{key:"canClearMainGame",get:function(){return this.mode===de&&!this.canUndo&&this.game.isReadOnly}},{key:"setMarkerPath",value:function(e){return this.update({markerPath:new ie({points:e})})}},{key:"setPathTurn",value:function(e){return this.update({pathTurn:e})}},{key:"setEvals",value:function(e){return this.update({evals:e})}},{key:"current",get:function(){return void 0===this.cache&&(this.cache=Object(g.d)(this.blacks,this.whites)),this.cache}},{key:"blacks",get:function(){return[].concat(Object(A.a)(this.game.blacks),Object(A.a)(this.freeBlacks.points))}},{key:"whites",get:function(){return[].concat(Object(A.a)(this.game.whites),Object(A.a)(this.freeWhites.points))}},{key:"convertMovesToStones",value:function(){var e=Object(g.i)(this.current);return this.update({mode:de,game:new ae,freeBlacks:new ie({points:e.stones(g.b.black)}),freeWhites:new ie({points:e.stones(g.b.white)})})}},{key:"encode",value:function(){var e=[],t=this.game.encode();return""!==t&&e.push(t),this.freeBlacks.empty||e.push("b:".concat(this.freeBlacks.encode())),this.freeWhites.empty||e.push("w:".concat(this.freeWhites.encode())),this.markerPoints.empty||e.push("p:".concat(this.markerPoints.encode())),this.markerLines.empty||e.push("l:".concat(this.markerLines.encode())),e.join(",")}}],[{key:"decode",value:function(t){var n,r,c,a,s,i=t.split(","),o=function(e){var t,n;return null!==(t=null===(n=i.find((function(t){return t.startsWith(e)})))||void 0===n?void 0:n.replace(e,""))&&void 0!==t?t:""},u="gid:".concat(o("gid:"),",g:").concat(o("g:"),",o:").concat(o("o:"),",c:").concat(o("c:")),l=o("b:"),d=o("w:"),j=o("p:"),h=o("l:");return new e({mode:de,game:null!==(n=ae.decode(u))&&void 0!==n?n:new ae,freeBlacks:null!==(r=ie.decode(l))&&void 0!==r?r:new ie,freeWhites:null!==(c=ie.decode(d))&&void 0!==c?c:new ie,markerPoints:null!==(a=ie.decode(j))&&void 0!==a?a:new ie,markerLines:null!==(s=oe.decode(h))&&void 0!==s?s:new oe})}}]),e}(),ve=function e(t){Object(O.a)(this,e),this.text="",this.colorScheme=void 0,this.onClick=void 0,void 0!==t&&Object.assign(this,t)},me=function e(t){Object(O.a)(this,e),this.ok=new ve,this.cancel=new ve,void 0!==t&&Object.assign(this,t)},pe=function(){function e(t){Object(O.a)(this,e),this.hit=0,this.page=0,this.pageSize=20,void 0!==t&&Object.assign(this,t)}return Object(x.a)(e,[{key:"update",value:function(t){return new e(Object(D.a)(Object(D.a)({},this),t))}},{key:"lastPage",get:function(){return~~((this.hit-1)/this.pageSize)}},{key:"navigate",value:function(e){return e<0||this.lastPage<e?this:this.update({page:e})}},{key:"isFirst",get:function(){return 0===this.page}},{key:"isLast",get:function(){return this.page===this.lastPage}},{key:"next",value:function(){return this.isLast?this:this.navigate(this.page+1)}},{key:"toLast",value:function(){return this.isLast?this:this.navigate(this.lastPage)}},{key:"prev",value:function(){return this.isFirst?this:this.navigate(this.page-1)}},{key:"toFirst",value:function(){return this.isFirst?this:this.navigate(0)}},{key:"pageStart",get:function(){return this.page*this.pageSize}},{key:"pageEnd",get:function(){return Math.min((this.page+1)*this.pageSize,this.hit)}},{key:"toString",value:function(){var e=this.page*this.pageSize+1,t=Math.min((this.page+1)*this.pageSize,this.hit);return"".concat(e,"-").concat(t," of ").concat(this.hit)}}]),e}(),ge=function(){function e(t){Object(O.a)(this,e),this.moves=[],this.useMoves=!0,this.playerId=void 0,void 0!==t&&Object.assign(this,t)}return Object(x.a)(e,[{key:"update",value:function(t){return new e(Object(D.a)(Object(D.a)({},this),t))}},{key:"setMoves",value:function(e){return this.update({moves:e})}},{key:"setUseMoves",value:function(e){return this.update({useMoves:e})}},{key:"setPlayerId",value:function(e){return this.update({playerId:e})}},{key:"query",get:function(){return{moves:this.useMoves&&this.moves.length>0?this.moves:void 0,playerId:this.playerId}}}]),e}(),ye=function e(t){Object(O.a)(this,e),this.hit=0,this.gameIds=[],this.error=void 0,void 0!==t&&Object.assign(this,t)},ke="search",we="stats",Se="detail",Ce="engine",Me="setup",ze=function(){function e(t){Object(O.a)(this,e),this.current=Ce,this.names=[Ce,Me],void 0!==t&&Object.assign(this,t)}return Object(x.a)(e,[{key:"update",value:function(t){return new e(Object(D.a)(Object(D.a)({},this),t))}},{key:"setCurrent",value:function(e){return this.update({current:e})}},{key:"setNames",value:function(e){return this.update({names:e})}},{key:"setIndex",value:function(e){return this.update({current:this.names[e]})}},{key:"index",get:function(){return this.names.indexOf(this.current)}}]),e}(),We=n(2),Ie=Object(i.createContext)({tabsState:new ze,setTabsState:function(){},searchQueryState:new ge,setSearchQueryState:function(){},searchResultState:new ye,setSearchResultState:function(){}}),Be=function(e){var t=e.children,n=Object(i.useState)(new ze),r=Object(f.a)(n,2),s=r[0],o=r[1],u=Object(i.useState)(new ge),l=Object(f.a)(u,2),d=l[0],j=l[1],h=Object(i.useState)(new ye),b=Object(f.a)(h,2),O=b[0],x=b[1],v={tabsState:s,setTabsState:o,searchQueryState:d,setSearchQueryState:j,searchResultState:O,setSearchResultState:x};return Object(i.useEffect)((function(){Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce();case 2:if(!e.sent){e.next=4;break}o(s.setNames([ke,we,Se,Ce,Me]).setCurrent(ke));case 4:case"end":return e.stop()}}),e)})))()}),[]),Object(We.jsx)(Ie.Provider,{value:v,children:t})},Ae=Object(i.createContext)({boardState:new xe,setBoardState:function(){},confirmState:void 0,setConfirmState:function(){}}),Fe=function(e){var t=e.children,n=Object(i.useState)((function(){return xe.decode(window.location.hash.slice(1))||new xe})),r=Object(f.a)(n,2),c=r[0],a=r[1],s=Object(i.useState)(),o=Object(f.a)(s,2),u=o[0],l=o[1];return Object(We.jsx)(Ae.Provider,{value:{boardState:c,setBoardState:function(e){a(e),window.history.replaceState(null,"","#".concat(e.encode()))},confirmState:u,setConfirmState:l},children:t})},Pe="showIndices",Re="showOrders",Le="emphasizeLastMove",Ee="showForbiddens",De="showPropertyRows",Ne="showPropertyEyes",Te="advancedMode",Ge="colorBase",Ue="pathEveryOther",qe=Object(i.createContext)({preference:new se,setPreference:function(){}}),Qe=function(e){var t=e.children,n=Object(i.useState)((function(){var e;return null!==(e=Ve(localStorage.getItem("preference")||"{}"))&&void 0!==e?e:new se})),r=Object(f.a)(n,2),c=r[0],a=r[1];return Object(We.jsx)(qe.Provider,{value:{preference:c,setPreference:function(e){a(e),localStorage.setItem("preference",$e(e))}},children:t})},$e=function(e){return JSON.stringify(e.map)},Ve=function(e){try{var t=JSON.parse(e);return new se(t)}catch(n){return}},He=function(){function e(t){Object(O.a)(this,e),this.W=void 0,this.C=void 0,this.P=void 0,t>=640?(this.W=640,this.C=40,this.P=40):t>=360?(this.W=360,this.C=24,this.P=12):(this.W=320,this.C=20,this.P=20)}return Object(x.a)(e,[{key:"cx",value:function(e){return this.P+e*this.C}},{key:"cy",value:function(e){return this.P+(g.a-1-e)*this.C}},{key:"c",value:function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1];return[this.cx(n),this.cy(r)]}},{key:"p",value:function(e){var t=Object(f.a)(e,2),n=t[0],r=t[1];return[Je((n-this.P)/this.C),Je((this.W-r-this.P)/this.C)]}},{key:"indices",get:function(){return new Array(g.a).fill(null).map((function(e,t){return t}))}},{key:"buttonSize",get:function(){switch(this.W){case 320:case 360:return"sm";case 640:return"lg"}}},{key:"rulerStrokeWidth",get:function(){switch(this.W){case 320:case 360:return 1;case 640:return 2}}},{key:"stoneStrokeWidth",get:function(){switch(this.W){case 320:case 360:return 1.5;case 640:return 2}}},{key:"indexFontSize",get:function(){switch(this.W){case 320:case 360:return"8px";case 640:return"16px"}}},{key:"indexPadding",get:function(){switch(this.W){case 320:case 360:return 1;case 640:return 2}}},{key:"orderFontSize",get:function(){switch(this.W){case 320:case 360:return"12px";case 640:return"16px"}}},{key:"markerFontSize",get:function(){switch(this.W){case 320:case 360:return"12px";case 640:return"20px"}}},{key:"propertyRowStrokeWidth",get:function(){switch(this.W){case 320:case 360:return 3;case 640:return 4}}},{key:"propertyRowStrokeDasharray",get:function(){switch(this.W){case 320:case 360:return"1 4";case 640:return"3 5"}}}]),e}(),_e=Object(i.createContext)(new He(640)),Ye=function(e){var t=e.children,n=Object(i.useMemo)((function(){return new He(window.innerWidth)}),[]);return Object(We.jsx)(_e.Provider,{value:n,children:t})},Je=function(e){return Math.min(Math.max(0,Math.round(e)),g.a-1)},Ke=n(178),Xe=n(211),Ze=n(179),et=n(181),tt=n(182),nt=n(183),rt=n(134),ct=n(175),at=n(97),st=n(15),it=function(e){switch(e.won){case!0:return Object(We.jsx)(ct.a,{justify:"center",children:Object(We.jsx)(at.a,{as:st.c,boxSize:"small",color:"green.500"})});case!1:return Object(We.jsx)(ct.a,{justify:"center",children:Object(We.jsx)(at.a,{as:st.f,boxSize:"small",color:"gray.500"})});case null:return Object(We.jsx)(ct.a,{justify:"center",children:Object(We.jsx)(at.a,{as:st.F,boxSize:"small",color:"gray.500"})});default:return Object(We.jsx)(We.Fragment,{})}},ot=function(e){var t,n=e.player,r=e.countriesMap,c=Object(i.useContext)(Ie),a=c.searchQueryState,s=c.setSearchQueryState,o=c.tabsState,u=c.setTabsState;return Object(We.jsxs)(Ke.a,{children:[Object(We.jsx)(rt.a,{variant:"link",onClick:function(){s(a.setPlayerId(n.id)),u(o.setCurrent(ke))},children:"".concat(n.name.trim()," ").concat(n.surname.trim())}),Object(We.jsx)("br",{}),null===(t=r.get(n.country))||void 0===t?void 0:t.name]})},ut=function(){var e,t,n=Object(i.useMemo)((function(){return new Q}),[]),r=Object(i.useState)(new Map),s=Object(f.a)(r,2),o=s[0],u=s[1],l=Object(i.useState)(new Map),h=Object(f.a)(l,2),b=h[0],O=h[1];Object(i.useEffect)((function(){Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u,e.next=3,n.getCountriesMap();case 3:return e.t1=e.sent,(0,e.t0)(e.t1),e.t2=O,e.next=8,n.getCitiesMap();case 8:e.t3=e.sent,(0,e.t2)(e.t3);case 10:case"end":return e.stop()}}),e)})))()}),[]);var x=Object(i.useContext)(Ae).boardState.game.gameid,v=Object(i.useState)(),m=Object(f.a)(v,2),p=m[0],g=m[1];if(Object(i.useEffect)((function(){void 0!==x?Object(a.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getGameViews([x]);case 2:(t=e.sent).length>0&&g(t[0]);case 4:case"end":return e.stop()}}),e)})))():g(void 0)}),[x]),void 0===p)return Object(We.jsx)(d.a,{children:Object(We.jsx)(Ke.a,{color:"gray.600",my:"1rem",children:"No game is selected"})});var y=p.black,k=p.white,w=p.tournament,S=p.rule,C=p.publisher,M="https://www.renju.net/media/games.php?gameid=".concat(p.id);return Object(We.jsxs)(Xe.b,{fontFamily:"Noto Serif",children:[Object(We.jsx)(Ze.a,{as:"h2",size:"sm",children:"Game"}),Object(We.jsxs)(j.a,{pl:"1rem",children:[Object(We.jsx)(j.b,{width:"25%",minWidth:"120px",children:Object(We.jsxs)(et.a,{size:"rjn-info",variant:"rjn-info",children:[Object(We.jsx)("colgroup",{span:1,style:{width:"25%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"25%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"50%"}}),Object(We.jsxs)(et.b,{children:[Object(We.jsxs)(et.f,{children:[Object(We.jsx)(et.d,{children:"Black"}),Object(We.jsx)(et.c,{children:Object(We.jsx)(it,{won:p.blackWon})}),Object(We.jsxs)(et.c,{isNumeric:!0,children:[p.btime||"?"," min"]})]}),Object(We.jsxs)(et.f,{children:[Object(We.jsx)(et.d,{children:"White"}),Object(We.jsx)(et.c,{children:Object(We.jsx)(it,{won:p.whiteWon})}),Object(We.jsxs)(et.c,{isNumeric:!0,children:[p.wtime||"?"," min"]})]})]})]})}),Object(We.jsx)(j.b,{width:"20%",minWidth:"120px",children:Object(We.jsxs)(et.a,{size:"rjn-info",variant:"rjn-info",children:[Object(We.jsx)("colgroup",{span:1,style:{width:"25%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"75%"}}),Object(We.jsxs)(et.b,{children:[Object(We.jsxs)(et.f,{children:[Object(We.jsx)(et.d,{children:"Rule"}),Object(We.jsx)(et.c,{isNumeric:!0,children:S.name})]}),Object(We.jsxs)(et.f,{children:[Object(We.jsx)(et.d,{children:"Swap"}),Object(We.jsx)(et.c,{isNumeric:!0,children:p.swap})]})]})]})}),Object(We.jsx)(j.b,{width:"30%",minWidth:"240px",children:Object(We.jsxs)(et.a,{size:"rjn-info",variant:"rjn-info",children:[Object(We.jsx)("colgroup",{span:1,style:{width:"15%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"85%"}}),Object(We.jsxs)(et.b,{children:[Object(We.jsxs)(et.f,{children:[Object(We.jsx)(et.d,{children:"Alt"}),Object(We.jsx)(et.c,{isNumeric:!0,children:p.alt})]}),Object(We.jsxs)(et.f,{children:[Object(We.jsx)(et.d,{children:"Info"}),Object(We.jsx)(et.c,{isNumeric:!0,children:p.info})]})]})]})})]}),Object(We.jsx)(Ze.a,{as:"h2",size:"sm",children:"Black Player"}),Object(We.jsx)(tt.a,{pl:"1rem",children:Object(We.jsx)(ot,{player:y,countriesMap:o})}),Object(We.jsx)(Ze.a,{as:"h2",size:"sm",children:"White Player"}),Object(We.jsx)(tt.a,{pl:"1rem",children:Object(We.jsx)(ot,{player:k,countriesMap:o})}),Object(We.jsx)(Ze.a,{as:"h2",size:"sm",children:"Tournament"}),Object(We.jsx)(tt.a,{pl:"1rem",children:Object(We.jsxs)(Ke.a,{children:[!w.rated&&"(Unrated)"," ","".concat(w.name.trim()),Object(We.jsx)("br",{}),"".concat(w.start," - ").concat(w.end),"\u2003",null===(e=b.get(w.city))||void 0===e?void 0:e.name,", ",null===(t=o.get(w.country))||void 0===t?void 0:t.name,Object(We.jsx)("br",{}),"Round ",p.round]})}),Object(We.jsx)(Ze.a,{as:"h2",size:"sm",children:"Publisher"}),Object(We.jsx)(tt.a,{pl:"1rem",children:Object(We.jsx)(ot,{player:C,countriesMap:o})}),Object(We.jsx)(Ze.a,{as:"h2",size:"sm",children:"Generated Link"}),Object(We.jsx)(tt.a,{pl:"1rem",children:Object(We.jsx)(nt.a,{href:M,isExternal:!0,color:"teal.500",fontFamily:"Roboto",children:M})})]})},lt=n(184),dt=n(212);function jt(){return new Worker(n.p+"static/js/gomocup.worker.40696c30.worker.js")}var ht=function(){var e=Object(i.useContext)(Ae),t=e.boardState,n=e.setBoardState,r=Object(i.useState)(!1),s=Object(f.a)(r,2),o=s[0],u=s[1],l=Object(i.useState)(null),d=Object(f.a)(l,2),j=d[0],h=d[1],b=Object(i.useState)(null),O=Object(f.a)(b,2),x=O[0],v=O[1],m=Object(i.useState)(!0),p=Object(f.a)(m,2),g=p[0],y=p[1],k=Object(i.useRef)(""),w=Object(i.useRef)(!0),S=Object(i.useRef)(0),C=Object(i.useRef)(null),M=Object(i.useRef)(!1),z=Object(i.useCallback)((function(){var e=[],n=[];return t.game.blacks.forEach((function(t){e.push(15*t[0]+t[1])})),t.game.whites.forEach((function(e){n.push(15*e[0]+e[1])})),{blacks:new Uint8Array(e),whites:new Uint8Array(n)}}),[t]),W=Object(i.useCallback)(Object(a.a)(c.a.mark((function e(){var n,r,a,s,i,o,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,w.current){e.next=3;break}return e.abrupt("return");case 3:u(!0),v(null),n=t.game.current.moves,r=t.game.current.inverted,C.current||(a=new jt,C.current=a,M.current=!1,a.onmessage=function(e){var t=e.data;if("ready"===t.type)M.current=!0;else if("log"===t.type){var n=t.text||"";if(n.startsWith("MESSAGE")){var r=/depth=(\d+)/.exec(n),c=/nodes=(\d+)/.exec(n),a=/val=(-?\d+)/.exec(n);a&&(S.current=parseInt(a[1],10));var s=Array.from(n.matchAll(/\[(\d+),(\d+)\]/g)).map((function(e){return{x:parseInt(e[1],10),y:parseInt(e[2],10),score:0}})),i=s.length>0?{x:s[0].x,y:s[0].y,score:a?parseInt(a[1],10):0}:void 0;h((function(e){return{bestMove:i||(null===e||void 0===e?void 0:e.bestMove),depth:r?parseInt(r[1],10):(null===e||void 0===e?void 0:e.depth)||0,nodes:c?parseInt(c[1],10):(null===e||void 0===e?void 0:e.nodes)||0,eval:a?parseInt(a[1],10):(null===e||void 0===e?void 0:e.eval)||0,pv:s,candidates:(null===e||void 0===e?void 0:e.candidates)||[]}}))}else if(n.startsWith("CANDS")){var o=Array.from(n.matchAll(/\[(\d+),(\d+),(-?\d+)\]/g)).map((function(e){return{x:parseInt(e[1],10),y:parseInt(e[2],10),score:parseInt(e[3],10)}}));h((function(e){return{bestMove:null===e||void 0===e?void 0:e.bestMove,depth:(null===e||void 0===e?void 0:e.depth)||0,nodes:(null===e||void 0===e?void 0:e.nodes)||0,eval:(null===e||void 0===e?void 0:e.eval)||0,pv:(null===e||void 0===e?void 0:e.pv)||[],candidates:o}}))}}else if("result"===t.type){var l=t.response;if(l&&l.includes(",")){var d=l.split(","),j=Object(f.a)(d,2),b=j[0],O=j[1],x={bestMove:{x:parseInt(b,10),y:parseInt(O,10),score:S.current},depth:0,nodes:0,eval:S.current,pv:[],candidates:[]};h(x)}u(!1)}else"error"===t.type&&v(String(t.message||"\u5f15\u64ce\u9519\u8bef"))},a.postMessage({type:"init"})),0===n.length?null===(s=C.current)||void 0===s||s.postMessage({type:"command",payload:"BEGIN"}):(o=n.map((function(e,t){var n=(r?t%2===1:t%2===0)?1:2;return"".concat(e[0],",").concat(e[1],",").concat(n)})),l="BOARD\n".concat(o.join("\n"),"\nDONE"),null===(i=C.current)||void 0===i||i.postMessage({type:"command",payload:l})),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),w.current&&v("\u5206\u6790\u9519\u8bef: ".concat(e.t0 instanceof Error?e.t0.message:String(e.t0)));case 14:return e.prev=14,e.finish(14);case 16:case"end":return e.stop()}}),e,null,[[0,11,14,16]])}))),[t,z]);Object(i.useEffect)((function(){return w.current=!0,function(){w.current=!1,C.current&&(C.current.terminate(),C.current=null)}}),[]),Object(i.useEffect)((function(){if(g){var e=t.game.current.moves,n=t.game.current.inverted,r=JSON.stringify(e)+":".concat(n);r===k.current||o||(k.current=r,C.current&&C.current.postMessage({type:"stop"}),W())}}),[t,g,o,W]);var I=Object(i.useCallback)((function(e){var r=[e.x,e.y];n(t.edit(r))}),[t,n]);Object(i.useEffect)((function(){if(j&&j.bestMove){var e=j.bestMove,r=[{x:e.x,y:e.y,score:e.score}];return n(t.setEvals(r)),function(){n(t.setEvals([]))}}}),[null===j||void 0===j?void 0:j.bestMove]);var B,A=function(e){return Math.abs(e)>=5e4?e>0?"+\u80dc\u5229":"-\u80dc\u5229":e>0?"+".concat(e):"".concat(e)};return Object(We.jsxs)(Xe.c,{spacing:4,align:"stretch",children:[Object(We.jsx)(tt.a,{p:4,borderWidth:1,borderRadius:"md",children:Object(We.jsxs)(Xe.c,{spacing:3,align:"stretch",children:[Object(We.jsx)(Ke.a,{fontSize:"lg",fontWeight:"bold",children:"\u5f15\u64ce\u8bbe\u7f6e"}),Object(We.jsx)(Xe.a,{spacing:4,children:Object(We.jsxs)(tt.a,{children:[Object(We.jsx)(Ke.a,{fontSize:"sm",mb:1,children:"\u81ea\u52a8\u5206\u6790"}),Object(We.jsx)(lt.a,{isChecked:g,onChange:function(e){return y(e.target.checked)},size:"md"})]})})]})}),x&&Object(We.jsxs)(dt.a,{status:"error",children:[Object(We.jsx)(dt.c,{}),x]}),j&&Object(We.jsx)(tt.a,{p:4,borderWidth:1,borderRadius:"md",children:Object(We.jsxs)(Xe.c,{spacing:3,align:"stretch",children:[Object(We.jsx)(Ke.a,{fontSize:"lg",fontWeight:"bold",children:"\u5206\u6790\u7ed3\u679c"}),Object(We.jsxs)(Xe.a,{spacing:6,children:[Object(We.jsxs)(Ke.a,{fontSize:"sm",children:[Object(We.jsx)("strong",{children:"\u6df1\u5ea6:"})," ",j.depth]}),Object(We.jsxs)(Ke.a,{fontSize:"sm",children:[Object(We.jsx)("strong",{children:"\u8282\u70b9:"})," ",(B=j.nodes,B>=1e6?"".concat((B/1e6).toFixed(1),"M"):B>=1e3?"".concat((B/1e3).toFixed(1),"K"):B.toString())]}),Object(We.jsxs)(Ke.a,{fontSize:"sm",children:[Object(We.jsx)("strong",{children:"\u4f30\u503c:"})," ",j.eval]})]}),j.bestMove&&Object(We.jsx)(tt.a,{p:3,bg:"blue.50",borderRadius:"md",children:Object(We.jsxs)(Xe.a,{justify:"space-between",children:[Object(We.jsxs)(Xe.c,{align:"start",spacing:1,children:[Object(We.jsx)(Ke.a,{fontSize:"sm",fontWeight:"bold",children:"\u6700\u4f73\u7740\u6cd5"}),Object(We.jsxs)(Ke.a,{fontSize:"lg",children:[String.fromCharCode(65+j.bestMove.x),j.bestMove.y+1]}),Object(We.jsxs)(Ke.a,{fontSize:"sm",color:"gray.600",children:["\u8bc4\u5206: ",A(j.bestMove.score)]})]}),Object(We.jsx)(rt.a,{colorScheme:"blue",size:"sm",onClick:function(){return I(j.bestMove)},children:"\u5e94\u7528\u7740\u6cd5"})]})}),j.pv.length>0&&Object(We.jsxs)(tt.a,{children:[Object(We.jsx)(Ke.a,{fontSize:"md",fontWeight:"bold",mb:2,children:"\u4e3b\u53d8"}),Object(We.jsx)(Ke.a,{fontSize:"sm",color:"gray.700",children:j.pv.map((function(e,t){return"".concat(String.fromCharCode(65+e.x)).concat(e.y+1).concat(t<j.pv.length-1?" ":"")})).join("")})]}),j.candidates.length>0&&Object(We.jsxs)(tt.a,{children:[Object(We.jsx)(Ke.a,{fontSize:"md",fontWeight:"bold",mb:2,children:"\u5019\u9009\u7740\u6cd5"}),Object(We.jsxs)(et.a,{size:"sm",variant:"simple",children:[Object(We.jsx)(et.e,{children:Object(We.jsxs)(et.f,{children:[Object(We.jsx)(et.d,{children:"\u6392\u540d"}),Object(We.jsx)(et.d,{children:"\u7740\u6cd5"}),Object(We.jsx)(et.d,{children:"\u8bc4\u5206"}),Object(We.jsx)(et.d,{children:"\u64cd\u4f5c"})]})}),Object(We.jsx)(et.b,{children:j.candidates.slice(0,10).map((function(e,t){return Object(We.jsxs)(et.f,{children:[Object(We.jsx)(et.c,{children:t+1}),Object(We.jsxs)(et.c,{children:[String.fromCharCode(65+e.x),e.y+1]}),Object(We.jsx)(et.c,{children:A(e.score)}),Object(We.jsx)(et.c,{children:Object(We.jsx)(rt.a,{size:"xs",colorScheme:"blue",variant:"outline",onClick:function(){return I(e)},children:"\u5e94\u7528"})})]},t)}))})]})]})]})})]})},bt=n(213),ft=n(185),Ot=n(186),xt=n(207),vt=n(187),mt=n(205),pt=n(188),gt=n(202),yt=n(192),kt=function(){var e=Object(i.useContext)(Ie),t=e.searchQueryState,n=e.setSearchQueryState,r=new N({moves:t.moves}).encode(",");return Object(We.jsxs)(ft.a,{size:"sm",children:[Object(We.jsx)(Ot.a,{children:Object(We.jsx)(st.B,{})}),Object(We.jsx)(xt.a,{type:"string",placeholder:"put moves on board",isReadOnly:!0,value:r}),Object(We.jsx)(vt.a,{children:Object(We.jsx)(mt.a,{isChecked:t.useMoves,onChange:function(e){return n(t.setUseMoves(e.target.checked))}})})]})},wt=function(){var e=Object(i.useContext)(Ie),t=e.searchQueryState,n=e.setSearchQueryState,r=Object(i.useMemo)((function(){return new Q}),[]),s=Object(i.useState)(""),o=Object(f.a)(s,2),u=o[0],l=o[1],d=Object(i.useState)([]),j=Object(f.a)(d,2),h=j[0],b=j[1],O=Object(pt.a)(),x=t.playerId;Object(i.useEffect)((function(){"number"===typeof x&&Object(a.a)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.getPlayer(x);case 2:t=e.sent,n=t?"".concat(t.name.trim()," ").concat(t.surname.trim()):"",l(n);case 5:case"end":return e.stop()}}),e)})))()}),[x]);var v=Object(i.useRef)(null);return Object(We.jsxs)(gt.a,{initialFocusRef:v,isOpen:O.isOpen,children:[Object(We.jsx)(gt.e,{children:Object(We.jsxs)(ft.a,{size:"sm",children:[Object(We.jsx)(Ot.a,{children:Object(We.jsx)(st.G,{})}),Object(We.jsx)(xt.a,{ref:v,type:"string",placeholder:"select player",value:u,onClick:O.onOpen,onChange:function(e){return function(e){l(e),Object(a.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.trim().split(/\s+/),t.t0=b,t.next=4,r.searchPlayers(n);case 4:t.t1=t.sent,(0,t.t0)(t.t1);case 6:case"end":return t.stop()}}),t)})))()}(e.target.value)}}),Object(We.jsx)(vt.a,{children:Object(We.jsx)(yt.a,{size:"sm",onClick:function(){n(t.setPlayerId(void 0)),l(""),O.onClose()},disabled:void 0===t.playerId&&!O.isOpen})})]})}),Object(We.jsxs)(gt.d,{children:[Object(We.jsx)(gt.b,{}),Object(We.jsx)(gt.c,{children:Object(We.jsx)(et.a,{variant:"unstyled",size:"sm",children:Object(We.jsx)(et.b,{children:h.map((function(e,r){return Object(We.jsx)(et.f,{onClick:function(){return r=e,n(t.setPlayerId(r.id)),void O.onClose();var r},_hover:{bg:"gray.100"},children:Object(We.jsx)(et.c,{children:"".concat(e.name.trim()," ").concat(e.surname.trim())})},r)}))})})})]})]})},St=function(){return Object(We.jsxs)(bt.a,{width:"100%",columns:2,spacing:1,minChildWidth:"240px",children:[Object(We.jsx)(kt,{}),Object(We.jsx)(wt,{})]})},Ct=n(125),Mt=n(193),zt=n(35),Wt=function(e){var t=e.pager,n=e.setPager;return Object(We.jsx)(d.a,{children:Object(We.jsxs)(Ct.a,{spacing:1,size:"sm",variant:"ghost",children:[Object(We.jsx)(Mt.a,{"aria-label":"first",icon:Object(We.jsx)(zt.c,{}),isDisabled:t.isFirst,onClick:function(){return n(t.toFirst())}}),Object(We.jsx)(Mt.a,{"aria-label":"prev",icon:Object(We.jsx)(zt.a,{}),isDisabled:t.isFirst,onClick:function(){return n(t.prev())}}),Object(We.jsx)(rt.a,{isDisabled:!0,width:"8rem",children:t.toString()}),Object(We.jsx)(Mt.a,{"aria-label":"next",icon:Object(We.jsx)(zt.b,{}),isDisabled:t.isLast,onClick:function(){return n(t.next())}}),Object(We.jsx)(Mt.a,{"aria-label":"last",icon:Object(We.jsx)(zt.d,{}),isDisabled:t.isLast,onClick:function(){return n(t.toLast())}})]})})},It=function(e){var t=e.gameIds,n=Object(i.useMemo)((function(){return new Q}),[]),r=Object(i.useState)([]),s=Object(f.a)(r,2),o=s[0],u=s[1];Object(i.useEffect)((function(){Object(a.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=u,e.next=3,n.getGameViews(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))()}),[t]);var l=Object(i.useContext)(Ae),d=l.boardState,j=l.setBoardState,h=l.setConfirmState,b=d.mode===Oe,O=Object(i.useState)(),x=Object(f.a)(O,2),v=x[0],m=x[1];return Object(We.jsxs)(et.a,{width:"100%",size:"rjn-info",variant:"rjn-info",children:[Object(We.jsx)(et.e,{children:Object(We.jsxs)(et.f,{children:[Object(We.jsx)(et.d,{children:"Date"}),Object(We.jsx)(et.d,{children:"Black"}),Object(We.jsx)(et.d,{colSpan:3,children:"Result"}),Object(We.jsx)(et.d,{children:"White"}),Object(We.jsx)(et.d,{children:"Rule"}),Object(We.jsx)(et.d,{children:"Op."})]})}),Object(We.jsx)("colgroup",{span:1,style:{width:"20%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"25%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"2.5%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"5%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"2.5%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"25%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"10%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"10%"}}),Object(We.jsx)(et.b,{children:o.map((function(e,t){var n=b?null===v||void 0===v?void 0:v.gameid:d.game.gameid,r=b?d.game.gameid:void 0;return Object(We.jsxs)(et.f,{onClick:function(){return function(e){var t=null!==v&&void 0!==v?v:d.game,n=new ae({main:new N({moves:e.moves}),gameid:e.id,cursor:d.game.current.size});b||m(d.game),j(d.setGame(n).setMode(Oe));var r=new me({ok:new ve({text:"Open",colorScheme:"blue",onClick:function(){j(new xe({game:n})),m(void 0),h(void 0)}}),cancel:new ve({text:"Cancel",onClick:function(){j(d.setGame(t).setMode(de)),m(void 0),h(void 0)}})});h(r)}(e)},bg:e.id===n?"green.100":e.id===r?"purple.100":void 0,_hover:{bg:"gray.100"},children:[Object(We.jsx)(et.c,{isNumeric:!0,children:e.tournament.start}),Object(We.jsx)(et.c,{children:J(e.black)}),Object(We.jsx)(et.c,{children:Object(We.jsx)(it,{won:e.blackWon})}),Object(We.jsx)(et.c,{children:e.moves.length.toString()}),Object(We.jsx)(et.c,{children:Object(We.jsx)(it,{won:e.whiteWon})}),Object(We.jsx)(et.c,{children:J(e.white)}),Object(We.jsx)(et.c,{isNumeric:!0,children:K(e.rule.name)}),Object(We.jsx)(et.c,{isNumeric:!0,children:e.opening.abbr.toUpperCase()})]},t)}))})]})},Bt=function(){var e=Object(i.useContext)(Ie).searchResultState,t=Object(i.useState)(new pe),n=Object(f.a)(t,2),r=n[0],c=n[1];Object(i.useEffect)((function(){c(new pe({hit:e.gameIds.length}))}),[e.gameIds]);var a=e.gameIds.slice(r.pageStart,r.pageEnd);return Object(We.jsxs)(We.Fragment,{children:[Object(We.jsx)(Wt,{pager:r,setPager:c}),Object(We.jsx)(It,{gameIds:a})]})},At=function(){var e=Object(i.useContext)(Ie).searchResultState;return Object(We.jsxs)(Xe.b,{width:"100%",align:"center",children:[Object(We.jsx)(St,{}),e.error&&Object(We.jsx)(Ke.a,{color:"gray.600",py:"1rem",children:e.error}),e.gameIds.length>0&&Object(We.jsx)(Bt,{})]})},Ft=n(194),Pt=n(57),Rt=n(208),Lt=function(){var e=Object(i.useState)(!1),t=Object(f.a)(e,2),n=t[0],r=t[1],s=Object(i.useState)(0),o=Object(f.a)(s,2),u=o[0],l=o[1],d=Object(i.useState)(0),j=Object(f.a)(d,2),h=j[0],b=j[1],O=Object(i.useState)(!1),x=Object(f.a)(O,2),v=x[0],m=x[1],p=Object(pt.a)(),g=function(){var e=Object(a.a)(c.a.mark((function e(){var t,n,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=document.getElementById("rif-file"),null!==(n=null===t||void 0===t?void 0:t.files)&&0!==n.length){e.next=5;break}return r(!0),e.abrupt("return");case 5:return p.onOpen(),Q.reset(),a=new Q,e.next=10,a.loadFromFile(n[0],(function(e){return l(e)}));case 10:return re.reset(),s=new re,e.next=14,s.loadFromRIFDatabase((function(e){return b(e)}));case 14:m(!0);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(We.jsxs)(We.Fragment,{children:[Object(We.jsxs)(Xe.b,{children:[Object(We.jsx)(Ze.a,{as:"h2",size:"sm",children:"Load RIF database"}),Object(We.jsxs)(Xe.b,{isInline:!0,children:[Object(We.jsxs)(ft.a,{size:"sm",children:[Object(We.jsxs)(Ot.a,{width:"5rem",children:[Object(We.jsx)(st.o,{})," \xa0 .rif"]}),Object(We.jsx)(xt.a,{id:"rif-file",type:"file",isInvalid:n,onChange:function(){return r(!1)}})]}),Object(We.jsx)(rt.a,{size:"sm",colorScheme:"blue",onClick:g,children:"Load"})]}),Object(We.jsx)(Ze.a,{as:"h3",size:"sm",children:"Remarks"}),Object(We.jsx)(tt.a,{children:Object(We.jsxs)(Ft.d,{children:[Object(We.jsxs)(Ft.c,{children:["The data loaded from file will be stored only in your browser's storage and"," ",Object(We.jsx)("b",{children:"never"})," uploaded to anywhere. Keep in mind that, once the storage was resetted by an action like deleting histories, your data will be also deleted as well."]}),Object(We.jsxs)(Ft.c,{children:["RIF's official dataset can be downloaded from"," ",Object(We.jsx)(nt.a,{href:"//www.renju.net/game/",color:"teal.500",isExternal:!0,children:"RenjuNet (XML format)"}),". Be sure to follow rules presented on the site."]})]})})]}),Object(We.jsxs)(Pt.a,{isOpen:p.isOpen,onClose:p.onClose,isCentered:!0,closeOnOverlayClick:!1,children:[Object(We.jsx)(Pt.g,{}),Object(We.jsxs)(Pt.d,{children:[Object(We.jsx)(Pt.f,{as:"h1",children:v?"Completed!":"Loading..."}),Object(We.jsx)(Pt.b,{children:Object(We.jsxs)(Xe.b,{spacing:"1rem",children:[Object(We.jsx)(Ze.a,{as:"h2",size:"sm",mb:"1rem",children:"Parsing content..."}),Object(We.jsx)(Rt.a,{value:u}),Object(We.jsx)(Ze.a,{as:"h2",size:"sm",mb:"1rem",children:"Analyzing games..."}),Object(We.jsx)(Rt.a,{value:h})]})}),Object(We.jsx)(Pt.e,{children:Object(We.jsx)(rt.a,{onClick:function(){return window.location.reload()},isDisabled:!v,children:"Reload App"})})]})]})]})},Et=n(195),Dt=n(196),Nt=function(e){var t=e.games,n=e.moves,r=e.playerId,c=t.filter((function(e){return e.black.id===r})),a=t.filter((function(e){return e.white.id===r})),s=F(c),i=F(a),o=P(c,n).slice(0,5),u=P(a,n).slice(0,5),l=Math.max.apply(Math,Object(A.a)(o.map((function(e){var t=Object(f.a)(e,2),n=(t[0],t[1]);return Math.max(n.blackWon,n.whiteWon,n.draw)}))).concat(Object(A.a)(u.map((function(e){var t=Object(f.a)(e,2),n=(t[0],t[1]);return Math.max(n.blackWon,n.whiteWon,n.draw)})))));return Object(We.jsxs)(Xe.b,{width:"100%",spacing:"1rem",my:"1rem",children:[Object(We.jsx)(Ut,{total:{label:"Play black",count:s.all},won:{label:"Won",count:s.blackWon,color:"blue.700"},lost:{label:"Lost",count:s.whiteWon,color:"green.700"},draw:{label:"Draw",count:s.draw,color:"gray.700"}}),Object(We.jsx)(qt,{stats:o,denominator:l}),Object(We.jsx)(Et.a,{}),Object(We.jsx)(Ut,{total:{label:"Play white",count:i.all},won:{label:"Won",count:i.whiteWon,color:"green.700"},lost:{label:"Lost",count:i.blackWon,color:"blue.700"},draw:{label:"Draw",count:i.draw,color:"gray.700"}}),Object(We.jsx)(qt,{stats:u,denominator:l,isBlackRight:!0})]})},Tt=function(e){var t=e.games,n=e.moves,r=F(t),c=P(t,n).slice(0,10),a=Math.max.apply(Math,Object(A.a)(c.map((function(e){var t=Object(f.a)(e,2),n=(t[0],t[1]);return Math.max(n.blackWon,n.whiteWon,n.draw)}))));return Object(We.jsxs)(Xe.b,{width:"100%",spacing:"1rem",my:"1rem",children:[Object(We.jsx)(Ut,{total:{label:"All",count:r.all},won:{label:"Black won",count:r.blackWon,color:"blue.700"},lost:{label:"White won",count:r.whiteWon,color:"green.700"},draw:{label:"Draw",count:r.draw,color:"gray.700"}}),Object(We.jsx)(qt,{stats:c,denominator:a})]})},Gt=function(e){var t=e.games,n=e.playerId,r=t.filter((function(e){return e.black.id===n})),c=t.filter((function(e){return e.white.id===n})),a=F(r),s=F(c);return Object(We.jsxs)(Xe.b,{width:"100%",spacing:"1rem",my:"1rem",children:[Object(We.jsx)(Ut,{total:{label:"Play black",count:a.all},won:{label:"Won",count:a.blackWon,color:"blue.700"},lost:{label:"Lost",count:a.whiteWon,color:"green.700"},draw:{label:"Draw",count:a.draw,color:"gray.700"}}),Object(We.jsx)(Et.a,{}),Object(We.jsx)(Ut,{total:{label:"Play white",count:s.all},won:{label:"Won",count:s.whiteWon,color:"green.700"},lost:{label:"Lost",count:s.blackWon,color:"blue.700"},draw:{label:"Draw",count:s.draw,color:"gray.700"}})]})},Ut=function(e){var t=e.total,n=e.won,r=e.lost,c=e.draw;return Object(We.jsxs)(bt.a,{columns:4,width:"100%",textAlign:"center",children:[Object(We.jsxs)(Dt.a,{textColor:t.color,children:[Object(We.jsx)(Dt.c,{children:t.label}),Object(We.jsx)(Dt.d,{children:t.count})]}),Object(We.jsxs)(Dt.a,{textColor:n.color,children:[Object(We.jsx)(Dt.c,{children:n.label}),Object(We.jsx)(Dt.d,{children:n.count}),Object(We.jsxs)(Dt.b,{children:[(100*n.count/t.count).toFixed(1),"%"]})]}),Object(We.jsxs)(Dt.a,{textColor:r.color,children:[Object(We.jsx)(Dt.c,{children:r.label}),Object(We.jsx)(Dt.d,{children:r.count}),Object(We.jsxs)(Dt.b,{children:[(100*r.count/t.count).toFixed(1),"%"]})]}),Object(We.jsxs)(Dt.a,{textColor:c.color,children:[Object(We.jsx)(Dt.c,{children:c.label}),Object(We.jsx)(Dt.d,{children:c.count}),Object(We.jsxs)(Dt.b,{children:[(100*c.count/t.count).toFixed(1),"%"]})]})]})},qt=function(e){var t=e.stats,n=e.denominator,r=e.isBlackRight,c=Object(i.useContext)(Ae),a=c.boardState,s=c.setBoardState;return Object(We.jsxs)(et.a,{width:"100%",size:"rjn-info",variant:"rjn-info",children:[Object(We.jsx)(et.e,{children:Object(We.jsxs)(et.f,{children:[Object(We.jsx)(et.d,{children:"Move"}),Object(We.jsx)(et.d,{children:"All"}),Object(We.jsx)(et.d,{children:r?"W. won":"B. won"}),Object(We.jsx)(et.d,{children:r?"B. won":"W. won"}),Object(We.jsx)(et.d,{children:"Draw"})]})}),Object(We.jsx)("colgroup",{span:1,style:{width:"10%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"15%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"25%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"25%"}}),Object(We.jsx)("colgroup",{span:1,style:{width:"25%"}}),Object(We.jsx)(et.b,{children:t.map((function(e,t){var c=Object(f.a)(e,2),i=c[0],o=c[1],u={color:"blue.200",count:o.blackWon},l={color:"green.200",count:o.whiteWon},d=r?[l,u]:[u,l],j=Object(f.a)(d,2),h=j[0],b=j[1];return Object(We.jsxs)(et.f,{_hover:{bg:"gray.100"},onClick:function(){return function(e){return s(a.setMode(de).edit(e))}(i)},children:[Object(We.jsx)(et.c,{isNumeric:!0,children:Object(g.j)(i).toString()}),Object(We.jsx)(et.c,{isNumeric:!0,children:o.all}),Object(We.jsx)(et.c,{isNumeric:!0,children:0!==h.count&&Object(We.jsx)(Qt,{color:h.color,count:h.count,denominator:n})}),Object(We.jsx)(et.c,{isNumeric:!0,children:0!==b.count&&Object(We.jsx)(Qt,{color:b.color,count:b.count,denominator:n})}),Object(We.jsx)(et.c,{isNumeric:!0,children:0!==o.draw&&Object(We.jsx)(Qt,{color:"gray.200",count:o.draw,denominator:n})})]},t)}))})]})},Qt=function(e){var t=e.color,n=e.count,r=e.denominator;return Object(We.jsx)(d.a,{children:Object(We.jsx)(ct.a,{backgroundColor:t,width:"".concat((100*n/r).toFixed(),"%"),justify:"center",overflowWrap:"normal",children:n})})},$t=function(){var e=Object(i.useMemo)((function(){return new Q}),[]),t=Object(i.useContext)(Ie),n=t.searchQueryState,r=t.searchResultState,s=Object(i.useState)([]),o=Object(f.a)(s,2),u=o[0],l=o[1];Object(i.useEffect)((function(){Object(a.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=l,t.next=3,e.getGameViews(r.gameIds);case 3:return t.t1=t.sent,t.abrupt("return",(0,t.t0)(t.t1));case 5:case"end":return t.stop()}}),t)})))()}),[r.gameIds]);var d=n.query,j=d.moves,h=d.playerId;return void 0!==j&&void 0!==h?Object(We.jsx)(Nt,{games:u,moves:j,playerId:h}):void 0!==j&&void 0===h?Object(We.jsx)(Tt,{games:u,moves:j}):void 0===j&&void 0!==h?Object(We.jsx)(Gt,{games:u,playerId:h}):Object(We.jsx)(We.Fragment,{})},Vt=function(){var e=Object(i.useContext)(Ie).searchResultState;return Object(We.jsxs)(Xe.b,{width:"100%",align:"center",children:[Object(We.jsx)(St,{}),e.error&&Object(We.jsx)(Ke.a,{color:"gray.600",py:"1rem",children:e.error}),e.gameIds.length>0&&Object(We.jsx)($t,{})]})},Ht=function(){var e=Object(i.useContext)(Ie),t=e.tabsState,n=e.setTabsState;return Object(We.jsxs)(h.e,{width:"100%",index:t.index,onChange:function(e){return n(t.setIndex(e))},children:[Object(We.jsx)(h.b,{children:t.names.map((function(e,t){return Object(We.jsx)(h.a,{children:_t(e)},t)}))}),Object(We.jsx)(h.d,{children:t.names.map((function(e,t){switch(e){case ke:return Object(We.jsx)(h.c,{px:0,children:Object(We.jsx)(At,{})},t);case we:return Object(We.jsx)(h.c,{px:0,children:Object(We.jsx)(Vt,{})},t);case Se:return Object(We.jsx)(h.c,{px:0,children:Object(We.jsx)(ut,{})},t);case Ce:return Object(We.jsx)(h.c,{px:0,children:Object(We.jsx)(ht,{})},t);case Me:return Object(We.jsx)(h.c,{px:0,children:Object(We.jsx)(Lt,{})},t);default:return Object(We.jsx)(We.Fragment,{})}}))})]})},_t=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Yt=function(){var e,t=Object(i.useMemo)((function(){return new re}),[]),n=Object(i.useContext)(Ae).boardState,r=Object(i.useContext)(Ie),s=r.searchQueryState,o=r.setSearchQueryState,u=r.setSearchResultState,l=n.game.current.moves,d=s.query;return Object(i.useEffect)((function(){o(s.setMoves(l))}),[l.length]),Object(i.useEffect)((function(){Object(a.a)(c.a.mark((function e(){var n,r,a,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.search(d);case 2:n=e.sent,r=n.hit,a=n.ids,s=n.error,u(new ye({hit:r,gameIds:a,error:s}));case 7:case"end":return e.stop()}}),e)})))()}),[null===(e=d.moves)||void 0===e?void 0:e.toString(),d.playerId]),Object(We.jsx)(Ht,{})},Jt=(n(160),function(){var e=Object(i.useContext)(_e);return Object(We.jsx)("rect",{x:0,y:0,width:e.W,height:e.W,rx:e.C/4,ry:e.C/4,stroke:"none",fill:"moccasin"})}),Kt=function(e){var t=e.stroke,n=Object(i.useContext)(_e),r=n.indices.map((function(e,r){return Object(We.jsx)("line",{x1:n.cx(e),y1:n.cy(0),x2:n.cx(e),y2:n.cy(g.a-1),stroke:t,strokeLinecap:"round",strokeWidth:n.rulerStrokeWidth},r)})),c=n.indices.map((function(e,r){return Object(We.jsx)("line",{x1:n.cx(0),y1:n.cy(e),x2:n.cx(g.a-1),y2:n.cy(e),stroke:t,strokeLinecap:"round",strokeWidth:n.rulerStrokeWidth},r)}));return Object(We.jsxs)("g",{children:[r,c]})},Xt=function(){var e=Object(i.useContext)(_e);return Object(We.jsx)("g",{children:[[3,3],[3,11],[7,7],[11,3],[11,11]].map((function(t,n){var r=Object(f.a)(t,2),c=r[0],a=r[1];return Object(We.jsx)("circle",{cx:e.cx(c),cy:e.cy(a),r:e.C/10,stroke:"none",fill:"gray"},n)}))})},Zt=function(e){var t=e.stroke,n=Object(i.useContext)(_e),r=n.indices.map((function(e,r){return Object(We.jsx)("text",{x:n.cx(e),y:n.cy(0)+19*n.P/20-n.indexPadding,textAnchor:"middle",fill:t,fontSize:n.indexFontSize,fontFamily:"Roboto",children:Object(g.g)(e)},r)})),c=n.indices.map((function(e,r){return Object(We.jsx)("text",{x:5*n.P/20+n.indexPadding,y:n.cy(e),textAnchor:"middle",dominantBaseline:"central",fill:t,fontSize:n.indexFontSize,fontFamily:"Roboto",children:Object(g.h)(e)},r)}));return Object(We.jsxs)("g",{children:[r,c]})},en=function(){var e=Object(i.useContext)(_e);return Object(We.jsx)("rect",{x:0,y:0,width:e.W,height:e.W,rx:e.C/4,ry:e.C/4,fill:"lavender",opacity:.7})},tn=function(e){var t=e.showIndices,n=e.showOverlay,r=e.colorBase,c=r?"gray":"darkgray";return Object(We.jsxs)("g",{children:[r&&Object(We.jsx)(Jt,{}),Object(We.jsx)(Kt,{stroke:c}),Object(We.jsx)(Xt,{}),t&&Object(We.jsx)(Zt,{stroke:c}),n&&Object(We.jsx)(en,{})]})},nn=function(e){var t=e.black,n=e.point,r=e.label,c=Object(i.useContext)(_e),a=c.c(n),s=Object(f.a)(a,2),o=s[0],u=s[1],l=c.C/2*9/10;return Object(We.jsxs)("g",{children:[Object(We.jsx)("circle",{cx:o,cy:u,r:l,strokeWidth:c.stoneStrokeWidth,stroke:"#222222",strokeOpacity:"0.7",fill:t?"#222222":"white"}),r&&Object(We.jsx)(un,{label:r,cx:o,cy:u,fontColor:t?"whitesmoke":"dimgray",fontSize:c.orderFontSize,fontFamily:"Noto Serif"})]})},rn=function(e){var t=e.start,n=e.end,r=e.stroke,c=e.strokeWidth,a=e.strokeDasharray,s=Object(f.a)(t,2),i=s[0],o=s[1],u=Object(f.a)(n,2),l=u[0],d=u[1],j=i===l||o===d;return Object(We.jsxs)("g",{children:[j&&Object(We.jsx)("line",{x1:i,y1:o,x2:l,y2:d,stroke:"white",strokeWidth:c,strokeLinecap:"butt",opacity:"0.6"}),Object(We.jsx)("line",{x1:i,y1:o,x2:l,y2:d,stroke:r,strokeWidth:c,strokeLinecap:"round",strokeDasharray:a,opacity:"0.4"})]})},cn=function(e){var t=e.shape,n=e.cx,r=e.cy,c=e.r,a=e.color,s=e.opacity,i=e.label,o=e.fontSize,u=e.fontFamily,l=e.fontColor,d=function(){switch(t){case"circle":return Object(We.jsx)(an,{cx:n,cy:r,r:c,color:a,opacity:s});case"diamond":return Object(We.jsx)(sn,{cx:n,cy:r,r:c,color:a,opacity:s});case"cross":return Object(We.jsx)(on,{cx:n,cy:r,r:c,color:a,opacity:s})}}(),j=void 0!==i&&Object(We.jsx)(un,{label:i,cx:n,cy:r,fontColor:l,fontSize:o,fontFamily:u});return Object(We.jsxs)("g",{children:[d,j]})},an=function(e){var t=e.cx,n=e.cy,r=e.r,c=e.color,a=e.opacity;return Object(We.jsx)("g",{children:Object(We.jsx)("circle",{cx:t,cy:n,r:r,stroke:"none",fill:c,fillOpacity:a})})},sn=function(e){var t=e.cx,n=e.cy,r=e.r,c=e.color,a=e.opacity;return Object(We.jsx)("g",{transform:"rotate(45, ".concat(t,", ").concat(n,")"),children:Object(We.jsx)("rect",{x:t-r,y:n-r,width:2*r,height:2*r,stroke:"none",fill:c,fillOpacity:a})})},on=function(e){var t=e.cx,n=e.cy,r=e.r,c=e.color,a=e.opacity,s=t-r,i=t+r,o=n+r,u=n-r,l=6*r/10;return Object(We.jsxs)("g",{children:[Object(We.jsx)("line",{x1:s,y1:o,x2:i,y2:u,stroke:c,strokeWidth:l,opacity:a}),Object(We.jsx)("line",{x1:s,y1:u,x2:i,y2:o,stroke:c,strokeWidth:l,opacity:a})]})},un=function(e){var t=e.label,n=e.cx,r=e.cy,c=e.fontColor,a=e.fontSize,s=e.fontFamily;return Object(We.jsx)("text",{x:n,y:r,textAnchor:"middle",dominantBaseline:"central",fill:c,fontSize:a,fontFamily:s,children:t})},ln=function(e){var t=e.state,n=Object(i.useContext)(_e),r=t.segments.map((function(e,t){var r=Object(f.a)(e,2),c=r[0],a=r[1];return Object(We.jsx)(rn,{start:n.c(c),end:n.c(a),stroke:"darkviolet",strokeWidth:n.propertyRowStrokeWidth,strokeDasharray:n.propertyRowStrokeDasharray},t)})),c=function(){if(void 0!==t.start){var e=n.c(t.start),r=Object(f.a)(e,2),c=r[0],a=r[1],s=n.C/16*3;return Object(We.jsx)(cn,{shape:"circle",cx:c,cy:a,r:s,color:"darkviolet",opacity:.8})}}();return Object(We.jsxs)("g",{children:[r,c]})},dn=function(e){var t=e.state,n=e.showLabel,r=Object(i.useContext)(_e),c=3*r.C/8,a=t.points.map((function(e,t){var a=r.c(e),s=Object(f.a)(a,2),i=s[0],o=s[1],u=n?"abcdefghijklmnopqrstuvwxyz".charAt(t):void 0;return Object(We.jsx)(cn,{shape:"circle",cx:i,cy:o,r:c,color:"silver",opacity:.8,label:u,fontColor:"#333333",fontSize:r.markerFontSize,fontFamily:"Noto Serif"},t)}));return Object(We.jsx)("g",{children:a})},jn=function(e){var t=e.state,n=e.appearance,r=Object(i.useContext)(_e),c=3*r.C/8,a=t.points.length-1,s=t.points.map((function(e,t){var s=r.c(e),i=Object(f.a)(s,2),o=i[0],u=i[1],l="everyOther"===n&&t%2===1,d=hn(n,t,a),j=Object(f.a)(d,2),h=j[0],b=j[1];return l?Object(We.jsx)(We.Fragment,{}):Object(We.jsx)(cn,{shape:"circle",cx:o,cy:u,r:c,color:h,opacity:.8,label:"".concat(t+1),fontColor:b,fontSize:r.markerFontSize,fontFamily:"Roboto"},t)}));return Object(We.jsx)("g",{children:s})},hn=function(e,t,n){var r=0===t,c=t===n,a=t%2===0;switch(e){case"everyOther":return r||c?["indigo","white"]:["white","indigo"];case"eachFromBlack":return a?["black","white"]:["white","black"];case"eachFromWhite":return a?["white","black"]:["black","white"]}},bn=function(e){var t=e.segments,n=e.points,r=e.path,c=e.showPointsLabel,a=e.pathAppearance;return Object(We.jsxs)("g",{children:[Object(We.jsx)(ln,{state:t}),Object(We.jsx)(dn,{state:n,showLabel:c}),Object(We.jsx)(jn,{state:r,appearance:a})]})},fn=n(50),On=function(e){var t=e.black,n=e.rows,r=Object(i.useContext)(_e),c=t?"blue":"darkgreen",a=n.map((function(e,t){return Object(We.jsx)(rn,{start:r.c(e.start),end:r.c(e.end),stroke:c,strokeWidth:r.propertyRowStrokeWidth,strokeDasharray:r.propertyRowStrokeDasharray},t)}));return Object(We.jsx)("g",{children:a})},xn=function(e){var t=e.black,n=e.rows,r=e.emphasized,c=Object(i.useContext)(_e),a=2*c.C/10,s=t?"blue":"darkgreen",o=n.map((function(e,t){var n=Object(fn.b)(e).eyes().map((function(e,t){var n=c.c(e),i=Object(f.a)(n,2),o=i[0],u=i[1];return r?Object(We.jsx)(cn,{shape:"diamond",cx:o,cy:u,r:a,color:s,opacity:.7},t):Object(We.jsx)(cn,{shape:"circle",cx:o,cy:u,r:a,color:s,opacity:.4},t)}));return Object(We.jsx)("g",{children:n},t)}));return Object(We.jsx)("g",{children:o})},vn=function(e){var t=e.points,n=Object(i.useContext)(_e),r=2*n.C/10,c=t.map((function(e,t){var c=n.c(e),a=Object(f.a)(c,2),s=a[0],i=a[1];return Object(We.jsx)(cn,{shape:"cross",cx:s,cy:i,r:r,color:"red",opacity:.5},t)}));return Object(We.jsx)("g",{children:c})},mn=function(e){var t=e.board,n=e.showRows,r=e.showEyes,c=e.showForbiddens,a=Object(g.i)(t);return Object(We.jsxs)("g",{children:[n&&Object(We.jsxs)(We.Fragment,{children:[Object(We.jsx)(On,{rows:a.rows(g.b.black,g.c.two),black:!0}),Object(We.jsx)(On,{rows:a.rows(g.b.black,g.c.sword),black:!0}),Object(We.jsx)(On,{rows:a.rows(g.b.black,g.c.three),black:!0}),Object(We.jsx)(On,{rows:a.rows(g.b.black,g.c.four),black:!0}),Object(We.jsx)(On,{rows:a.rows(g.b.white,g.c.two)}),Object(We.jsx)(On,{rows:a.rows(g.b.white,g.c.sword)}),Object(We.jsx)(On,{rows:a.rows(g.b.white,g.c.three)}),Object(We.jsx)(On,{rows:a.rows(g.b.white,g.c.four)})]}),r&&Object(We.jsxs)(We.Fragment,{children:[Object(We.jsx)(xn,{rows:a.rows(g.b.black,g.c.three),black:!0}),Object(We.jsx)(xn,{rows:a.rows(g.b.black,g.c.four),black:!0,emphasized:!0}),Object(We.jsx)(xn,{rows:a.rows(g.b.white,g.c.three)}),Object(We.jsx)(xn,{rows:a.rows(g.b.white,g.c.four),emphasized:!0})]}),c&&Object(We.jsx)(vn,{points:a.forbiddens().map((function(e){var t=Object(f.a)(e,2);t[0];return t[1]}))})]})},pn=function(e){var t=e.points,n=e.inverted,r=e.showOrders;return Object(We.jsx)("g",{children:t.map((function(e,t){var c=n?t%2===1:t%2===0;return Object(We.jsx)(nn,{point:e,black:c,label:r?"".concat(t+1):void 0},t)}))})},gn=function(e){var t=e.points,n=e.black;return Object(We.jsx)("g",{children:t.map((function(e,t){return Object(We.jsx)(nn,{point:e,black:n},t)}))})},yn=function(e){var t=e.point,n=Object(i.useContext)(_e),r=n.c(t),c=Object(f.a)(r,2),a=c[0],s=c[1],o=n.C/2*21/20;return Object(We.jsx)(cn,{shape:"circle",cx:a,cy:s,r:o,color:"violet",opacity:1})},kn=function(e){var t=e.game,n=e.showOrders,r=e.showLastMove,c=e.freeBlacks,a=e.freeWhites;return Object(We.jsxs)("g",{children:[r&&t.lastMove&&Object(We.jsx)(yn,{point:t.lastMove}),Object(We.jsx)(pn,{points:t.moves,inverted:t.inverted,showOrders:n}),Object(We.jsx)(gn,{points:c.points,black:!0}),Object(We.jsx)(gn,{points:a.points,black:!1})]})},wn=function(e){var t=e.evals,n=Object(i.useContext)(_e),r=t.map((function(e,t){var r=n.c([e.x,e.y]),c=Object(f.a)(r,2),a=c[0],s=c[1],i="".concat(e.score);return Object(We.jsx)("text",{x:a,y:s,textAnchor:"middle",dominantBaseline:"central",fill:e.score>=0?"darkblue":"darkred",fontSize:n.markerFontSize,fontFamily:"Roboto",opacity:.9,children:i},t)}));return Object(We.jsx)("g",{children:r})},Sn=function(e){var t=e.id,n=e.onClickPoint,r=e.state,c=Object(i.useContext)(_e),a=Object(i.useContext)(qe).preference,s=r.mode===Oe?r.game.main:r.game.current,o=n&&function(e){var t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.x,a=e.clientY-t.y;n(c.p([r,a]))},u=r.mode===Oe,l=a.has(Ue)?"everyOther":r.pathTurn?"eachFromBlack":"eachFromWhite";return Object(We.jsxs)("svg",{id:t,width:c.W,height:c.W,onClick:o,children:[Object(We.jsx)(tn,{showIndices:a.has(Pe),showOverlay:u,colorBase:a.has(Ge)}),!u&&Object(We.jsx)(mn,{board:r.current,showRows:a.has(De),showEyes:a.has(Ne),showForbiddens:a.has(Ee)}),!u&&Object(We.jsx)(bn,{points:r.markerPoints,segments:r.markerLines,path:r.markerPath,showPointsLabel:a.has(Re),pathAppearance:l}),Object(We.jsx)(kn,{game:s,showOrders:a.has(Re),showLastMove:a.has(Le),freeBlacks:r.freeBlacks,freeWhites:r.freeWhites}),!u&&r.evals.length>0&&Object(We.jsx)(wn,{evals:r.evals})]})},Cn=function(){var e=Object(i.useContext)(Ae),t=e.boardState,n=e.setBoardState;return Object(We.jsx)(Sn,{id:"main-board",state:t,onClickPoint:function(e){return n(t.edit(e))}})},Mn=function(){var e=Object(i.useContext)(_e),t=Object(i.useContext)(Ae).confirmState;return void 0===t?Object(We.jsx)(We.Fragment,{}):Object(We.jsxs)(Ct.a,{width:"100%",justifyContent:"space-evenly",alignItems:"center",size:e.buttonSize,children:[Object(We.jsx)(rt.a,{width:"25%",colorScheme:t.ok.colorScheme,onClick:t.ok.onClick,children:t.ok.text}),Object(We.jsx)(rt.a,{width:"25%",colorScheme:t.cancel.colorScheme,onClick:t.cancel.onClick,children:t.cancel.text})]})},zn=n(206),Wn=function(e){switch(e.mode){case de:return Object(We.jsx)(at.a,{boxSize:"small",as:st.B});case je:return Object(We.jsx)(at.a,{boxSize:"small",as:st.a});case he:return Object(We.jsx)(at.a,{boxSize:"small",as:st.b});case be:return Object(We.jsx)(at.a,{boxSize:"small",as:st.k});case fe:return Object(We.jsx)(at.a,{boxSize:"small",as:st.l});default:return Object(We.jsx)(at.a,{boxSize:"small",as:st.B})}},In=function(){var e=Object(i.useContext)(Ae),t=e.boardState,n=e.setBoardState;return Object(We.jsx)(We.Fragment,{children:Object(We.jsxs)(zn.a,{autoSelect:!1,placement:"top",closeOnSelect:!1,children:[Object(We.jsx)(zn.b,{as:Mt.a,icon:Object(We.jsx)(Wn,{mode:t.mode}),"aria-label":"edit"}),Object(We.jsxs)(zn.g,{children:[Object(We.jsxs)(zn.h,{type:"radio",title:"Mode",value:t.mode,onChange:function(e){n(t.setMode(e))},children:[Object(We.jsx)(zn.f,{value:de,children:Object(We.jsxs)(ct.a,{alignItems:"center",children:[Object(We.jsx)(Wn,{mode:de}),Object(We.jsx)(Ke.a,{ml:2,children:"Move"})]})}),Object(We.jsx)(zn.f,{value:je,children:Object(We.jsxs)(ct.a,{alignItems:"center",children:[Object(We.jsx)(Wn,{mode:je}),Object(We.jsx)(Ke.a,{ml:2,children:"Add Black Stones"})]})}),Object(We.jsx)(zn.f,{value:he,children:Object(We.jsxs)(ct.a,{alignItems:"center",children:[Object(We.jsx)(Wn,{mode:he}),Object(We.jsx)(Ke.a,{ml:2,children:"Add White Stones"})]})}),Object(We.jsx)(zn.f,{value:be,children:Object(We.jsxs)(ct.a,{alignItems:"center",children:[Object(We.jsx)(Wn,{mode:be}),Object(We.jsx)(Ke.a,{ml:2,children:"Mark Points"})]})}),Object(We.jsx)(zn.f,{value:fe,children:Object(We.jsxs)(ct.a,{alignItems:"center",children:[Object(We.jsx)(Wn,{mode:fe}),Object(We.jsx)(Ke.a,{ml:2,children:"Mark Lines"})]})})]}),Object(We.jsx)(zn.h,{type:"checkbox",title:"Option",value:t.game.main.inverted?["invertMoves"]:[],onChange:function(e){var r=e.includes("invertMoves"),c=t.game.invertMoves(r);n(t.setGame(c))},children:Object(We.jsx)(zn.f,{value:"invertMoves",children:Object(We.jsxs)(ct.a,{alignItems:"center",children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.g}),Object(We.jsx)(Ke.a,{ml:2,children:"Invert Moves"})]})})}),Object(We.jsx)(zn.c,{}),Object(We.jsxs)(zn.e,{onClick:function(){window.confirm("All moves, free stones and markers will be cleared. OK?")&&n(new xe)},children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.i,color:"red.500"}),Object(We.jsx)(Ke.a,{ml:2,color:"red.500",children:"Reset All"})]})]})]})})},Bn=n(203),An=n(197),Fn=n(198),Pn=function(e){var t=e.isOpen,n=e.onClose;return Object(We.jsxs)(Pt.a,{isOpen:t,onClose:n,isCentered:!0,children:[Object(We.jsx)(Pt.g,{}),Object(We.jsxs)(Pt.d,{children:[Object(We.jsx)(Pt.f,{as:"h1",children:"About Renju Note"}),Object(We.jsx)(Pt.c,{}),Object(We.jsx)(Pt.b,{children:Object(We.jsxs)(Xe.b,{children:[Object(We.jsx)(Ze.a,{as:"h2",size:"sm",children:"Links"}),Object(We.jsxs)(Ft.a,{children:[Object(We.jsxs)(Ft.c,{children:[Object(We.jsx)(Ft.b,{as:zt.g}),Object(We.jsx)(nt.a,{href:"//twitter.com/yubessy_renju",color:"teal.500",isExternal:!0,children:"@yubessy_renju"}),"\xa0-\xa0contact"]}),Object(We.jsxs)(Ft.c,{children:[Object(We.jsx)(Ft.b,{as:zt.f}),Object(We.jsx)(nt.a,{href:"//github.com/renju-note",color:"teal.500",isExternal:!0,children:"@renju-note"}),"\xa0-\xa0source code"]})]}),Object(We.jsx)(Ze.a,{as:"h2",size:"sm",children:"Remarks"}),Object(We.jsx)(tt.a,{children:Object(We.jsxs)(Ft.d,{children:[Object(We.jsx)(Ft.c,{children:"Use on your own responsibility."}),Object(We.jsx)(Ft.c,{children:"Some of your activity logs will be sent to third-party analytics services in order to improve user experiences."})]})})]})}),Object(We.jsx)(Pt.e,{})]})]})},Rn=function(e){var t=e.id,n=Object(i.useContext)(Ae).boardState;return Object(We.jsx)(tt.a,{hidden:!0,children:Object(We.jsx)(_e.Provider,{value:new He(640),children:Object(We.jsx)(Sn,{id:t,state:n})})})},Ln=function(e){var t=e.isOpen,n=e.onClose;return Object(We.jsx)(Fn.a,{isOpen:t,onClose:n,leastDestructiveRef:void 0,isCentered:!0,children:Object(We.jsx)(Pt.g,{children:Object(We.jsxs)(Fn.b,{children:[Object(We.jsx)(Pt.f,{as:"h1",children:"Now you're in advanced mode!"}),Object(We.jsxs)(Pt.b,{children:["All features in advanced mode are ",Object(We.jsx)("b",{children:"EXPERIMENTAL"}),". There is no guarantee for their behaviour on your device."]}),Object(We.jsx)(Pt.e,{children:Object(We.jsx)(rt.a,{colorScheme:"blue",onClick:n,children:"OK"})})]})})})},En=function(){var e=Object(Bn.a)(),t=Object(i.useContext)(Ae).boardState,n=Object(g.k)(t.game.current.moves).toString(),r=Object(An.a)(n),c=r.onCopy,a=r.value,s="download-hidden",o=Object(pt.a)(),u=Object(i.useContext)(qe),l=u.preference,d=u.setPreference,j=l.has(Te),h=j?st.s:st.r,b=Object(pt.a)();return Object(We.jsxs)(We.Fragment,{children:[Object(We.jsxs)(zn.a,{autoSelect:!1,placement:"top-start",children:[Object(We.jsx)(zn.b,{as:Mt.a,icon:Object(We.jsx)(st.y,{})}),Object(We.jsxs)(zn.g,{children:[Object(We.jsxs)(zn.d,{title:"Actions",children:[Object(We.jsxs)(zn.e,{onClick:function(){a&&(c(),e({title:"Copied.",description:"Paste them as you need.",status:"success",duration:5e3,isClosable:!0}))},children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.d}),Object(We.jsx)(Ke.a,{ml:2,children:"Copy Moves to Clipboard"})]}),Object(We.jsxs)(zn.e,{onClick:function(){!function(e){var t=document.getElementById(e),n=(new XMLSerializer).serializeToString(t),r=new Image;r.src="data:image/svg+xml;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(n)));var c=document.createElement("canvas");c.width=t.width.baseVal.value,c.height=t.height.baseVal.value;var a=c.getContext("2d");a.fillStyle="white",a.fillRect(0,0,c.width,c.height),r.onload=function(){a.drawImage(r,0,0);var e=document.createElement("a");e.href=c.toDataURL("image/png"),e.setAttribute("download","renju-note.png"),e.dispatchEvent(new MouseEvent("click"))}}(s),e({title:"Downloaded.",description:"Check your browser's status.",status:"success",duration:5e3,isClosable:!0})},children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.j}),Object(We.jsx)(Ke.a,{ml:2,children:"Download Board Picture"})]})]}),Object(We.jsx)(zn.d,{title:"Advanced",children:Object(We.jsxs)(zn.e,{onClick:function(){j?d(l.off([Te])):(o.onOpen(),d(l.on([Te])))},children:[Object(We.jsx)(at.a,{boxSize:"small",as:h}),Object(We.jsx)(Ke.a,{ml:2,mr:1,children:j?"Basic Mode":"Advanced Mode"}),!j&&Object(We.jsx)(at.a,{boxSize:"small",as:st.p})]})}),Object(We.jsx)(zn.c,{}),Object(We.jsxs)(zn.e,{onClick:b.onOpen,children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.A}),Object(We.jsx)(Ke.a,{ml:2,children:"About Renju Note"})]})]})]}),Object(We.jsx)(Rn,{id:s}),Object(We.jsx)(Ln,{isOpen:o.isOpen,onClose:o.onClose}),Object(We.jsx)(Pn,{isOpen:b.isOpen,onClose:b.onClose})]})},Dn=function(){var e=Nn(),t=Object(f.a)(e,2),n=t[0],r=t[1];return Object(We.jsxs)(zn.a,{autoSelect:!1,placement:"top",children:[Object(We.jsx)(zn.b,{as:Mt.a,icon:Object(We.jsx)(zt.e,{}),colorScheme:"purple"}),Object(We.jsxs)(zn.g,{children:[Object(We.jsxs)(zn.e,{onClick:function(){return r(n.clearBranch())},children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.h}),Object(We.jsx)(Ke.a,{ml:2,mr:1,children:"Clear Branch"})]}),Object(We.jsx)(zn.c,{}),Object(We.jsxs)(zn.e,{onClick:function(){return r(n.newFromBranch())},children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.C}),Object(We.jsx)(Ke.a,{ml:2,mr:1,children:"Set Branch as Main"})]})]})]})},Nn=function(){var e=Object(i.useContext)(Ae),t=e.boardState,n=e.setBoardState;return[t.game,function(e){return n(t.setGame(e))}]},Tn=function(){var e=Object(i.useContext)(_e),t=Nn(),n=Object(f.a)(t,2),r=n[0],c=n[1];return Object(We.jsxs)(Ct.a,{spacing:1,variant:"ghost",size:e.buttonSize,children:[Object(We.jsx)(Mt.a,{onClick:function(){return c(r.toStart())},icon:Object(We.jsx)(zt.c,{}),"aria-label":"to start",isDisabled:!r.canBackward}),Object(We.jsx)(Mt.a,{onClick:function(){return c(r.backward())},icon:Object(We.jsx)(zt.a,{}),"aria-label":"backward",isDisabled:!r.canBackward}),r.isBranching?Object(We.jsx)(Dn,{}):Object(We.jsx)(rt.a,{width:6,fontFamily:"Noto Serif",fontWeight:"normal",isDisabled:!0,children:r.cursor}),Object(We.jsx)(Mt.a,{onClick:function(){return c(r.forward())},icon:Object(We.jsx)(zt.b,{}),"aria-label":"forward",isDisabled:!r.canForward}),Object(We.jsx)(Mt.a,{onClick:function(){return c(r.toLast())},icon:Object(We.jsx)(zt.d,{}),"aria-label":"to last",isDisabled:!r.canForward})]})},Gn=function(){var e=Object(i.useContext)(qe),t=e.preference,n=e.setPreference,r=[Ge,Pe,Re,Le],c=[Ee,Ne,De];return Object(We.jsx)(We.Fragment,{children:Object(We.jsxs)(zn.a,{placement:"top-end",autoSelect:!1,closeOnSelect:!1,children:[Object(We.jsx)(zn.b,{as:Mt.a,icon:Object(We.jsx)(st.D,{}),"aria-label":"more"}),Object(We.jsxs)(zn.g,{children:[Object(We.jsxs)(zn.h,{title:"Board and Moves",type:"checkbox",defaultValue:t.values,onChange:function(e){return n(t.change(r,e))},children:[Object(We.jsx)(zn.f,{value:Ge,children:Object(We.jsxs)(ct.a,{alignItems:"center",children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.z}),Object(We.jsx)(Ke.a,{ml:2,children:"Color Board"})]})}),Object(We.jsx)(zn.f,{value:Pe,children:Object(We.jsxs)(ct.a,{alignItems:"center",children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.u}),Object(We.jsx)(Ke.a,{ml:2,children:"Line Indices"})]})}),Object(We.jsx)(zn.f,{value:Re,children:Object(We.jsxs)(ct.a,{alignItems:"center",children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.x}),Object(We.jsx)(Ke.a,{ml:2,children:"Move Orders"})]})}),Object(We.jsx)(zn.f,{value:Le,children:Object(We.jsxs)(ct.a,{alignItems:"center",children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.q}),Object(We.jsx)(Ke.a,{ml:2,children:"Last Move"})]})})]}),Object(We.jsxs)(zn.h,{title:"Properties",type:"checkbox",defaultValue:t.values,onChange:function(e){return n(t.change(c,e))},children:[Object(We.jsx)(zn.f,{value:Ee,children:Object(We.jsxs)(ct.a,{alignItems:"center",children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.f}),Object(We.jsx)(Ke.a,{ml:2,children:"Forbidden Points"})]})}),Object(We.jsx)(zn.f,{value:Ne,children:Object(We.jsxs)(ct.a,{alignItems:"center",children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.E,style:{transform:"rotate(45deg)"}}),Object(We.jsx)(Ke.a,{ml:2,children:"Threes and Fours"})]})}),Object(We.jsx)(zn.f,{value:"showPropertyRows",children:Object(We.jsxs)(ct.a,{alignItems:"center",children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.t}),Object(We.jsx)(Ke.a,{ml:2,children:"Potential Lines"})]})})]})]})]})})},Un=function(e){switch(e.mode){case de:return Object(We.jsx)(st.e,{});case je:return Object(We.jsx)(st.v,{});case he:return Object(We.jsx)(st.w,{});case be:return Object(We.jsx)(st.m,{});case fe:return Object(We.jsx)(st.n,{});default:return Object(We.jsx)(st.e,{})}},qn=function(){var e=Object(i.useContext)(Ae),t=e.boardState,n=e.setBoardState;return Object(We.jsxs)(zn.a,{autoSelect:!1,placement:"top",children:[Object(We.jsx)(zn.b,{as:Mt.a,icon:Object(We.jsx)(st.h,{style:{transform:"rotate(180deg)"}})}),Object(We.jsx)(zn.g,{children:Object(We.jsxs)(zn.e,{onClick:function(){return n(t.setGame(t.game.clearRest()))},children:[Object(We.jsx)(at.a,{boxSize:"small",as:st.h,style:{transform:"rotate(180deg)"}}),Object(We.jsx)(Ke.a,{ml:2,mr:1,children:"Clear Rest of Moves"})]})})]})},Qn=function(){var e=Object(i.useContext)(Ae),t=e.boardState,n=e.setBoardState;return Object(We.jsxs)(zn.a,{autoSelect:!1,placement:"top",children:[Object(We.jsx)(zn.b,{as:Mt.a,icon:Object(We.jsx)(zt.h,{})}),Object(We.jsx)(zn.g,{children:Object(We.jsxs)(zn.e,{onClick:function(){return n(t.setGame(new ae))},children:[Object(We.jsx)(at.a,{boxSize:"small",as:zt.h}),Object(We.jsx)(Ke.a,{ml:2,mr:1,children:"Clear Game"})]})})]})},$n=function(){var e=Object(i.useContext)(Ae),t=e.boardState,n=e.setBoardState;return t.canClearRestOfMoves?Object(We.jsx)(qn,{}):t.canClearMainGame?Object(We.jsx)(Qn,{}):Object(We.jsx)(Mt.a,{onClick:function(){return n(t.undo())},onTouchStart:function(e){return e.preventDefault()},icon:Object(We.jsx)(Un,{mode:t.mode}),"aria-label":"undo",colorScheme:t.game.isBranching?"purple":void 0,isDisabled:!t.canUndo})},Vn=function(){var e=Object(i.useContext)(_e);return Object(We.jsxs)(Ct.a,{width:"100%",variant:"ghost",justifyContent:"space-around",alignItems:"center",size:e.buttonSize,children:[Object(We.jsx)(En,{}),Object(We.jsx)(In,{}),Object(We.jsx)(Tn,{}),Object(We.jsx)($n,{}),Object(We.jsx)(Gn,{})]})},Hn=function(){var e=Object(i.useContext)(Ae).confirmState;return Object(We.jsx)(We.Fragment,{children:void 0!==e?Object(We.jsx)(Mn,{}):Object(We.jsx)(Vn,{})})},_n=function(){return Object(We.jsxs)(Xe.b,{spacing:"1rem",children:[Object(We.jsx)(Cn,{}),Object(We.jsx)(Hn,{})]})},Yn=n(199),Jn=Object(Yn.a)({components:{Table:{parts:["td","th","tr"],sizes:{"rjn-info":{th:{fontSize:"xs",px:0,py:1,lineHeight:1.2},td:{fontSize:"md",px:0,py:1,lineHeight:1.2}}},variants:{"rjn-info":{th:{textAlign:"center"},td:Object(D.a)({textAlign:"center",fontFamily:"Noto Serif"},{"&[data-is-numeric=true]":{fontFamily:"Courier Prime"}})}}}}}),Kn=function(){var e=Object(i.useContext)(_e),t=Object(i.useContext)(qe).preference;return Object(We.jsx)(Fe,{children:Object(We.jsx)(d.a,{my:"0.5rem",children:Object(We.jsxs)(j.a,{justify:"center",children:[Object(We.jsx)(j.b,{w:e.W,children:Object(We.jsx)(_n,{})}),t.has(Te)&&Object(We.jsx)(j.b,{w:e.W,children:Object(We.jsx)(Be,{children:Object(We.jsx)(Yt,{})})})]})})})},Xn=function(){return Object(We.jsx)(l.a,{theme:Jn,children:Object(We.jsx)(Ye,{children:Object(We.jsx)(Qe,{children:Object(We.jsx)(Kn,{})})})})};n(162),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));fetch("/__/firebase/init.json").then(function(){var e=Object(a.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.ok){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t.json().catch((function(){return null}));case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return");case 7:s.a.initializeApp(n);try{s.a.analytics()}catch(r){}case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(){})),u.a.render(Object(We.jsx)(i.StrictMode,{children:Object(We.jsx)(Xn,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[163,1,2]]]);
//# sourceMappingURL=main.3c229917.chunk.js.map